import{aj as e,n as t,gl as l,a3 as a,bP as n,av as o,at as s,dj as r,au as i,bF as c,aW as d,fM as u,cg as p,c as m,o as v,S as x,J as f,ay as h,a5 as b,H as g,gm as y,ac as k,aa as w,cO as C,aR as $,F as T,_,cC as I,a2 as B,cF as A,a7 as S,d0 as D,a8 as R,M as N,b as W,bS as U,w as V,d as j,t as E,a as M,cX as z,ae as P,a9 as O,ax as F,cD as H,K as Z,aP as K,aT as L,R as Y,T as q,aQ as G,a6 as Q,b$ as J,fS as X,fT as ee,d6 as te,bC as le,P as ae,E as ne,G as oe,gn as se,af as re,bE as ie,D as ce,go as de,d8 as ue}from"./BA32e25q.js";import{E as pe,a as me}from"./BtweFsGM.js";import"./DibjRb3r.js";import"./CJpU0XlD.js";import"./C9Xc27XT.js";const ve=_(t({__name:"remark",props:{remark:{type:String,default:""},address:{type:String,default:""},chain:{type:String,default:""},priority:{type:Number,default:0},teleported:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},formatAddress:{type:Function,default:e=>"*"+(null==e?void 0:e.slice(-6))},mouseoverAddress:{type:Function,default:null},addressClass:{type:String,default:""},addressStyle:{type:String,default:""},iconEditColor:{type:String,default:"var(--third-text)"},showAddressTitle:{type:Boolean,default:!1},iconEditSize:{type:String,default:"12px"},iconSize:{type:String,default:"16px"},showAddress:{type:Boolean,default:!0},maxRemarkLength:{type:Number,default:14},wallet_logo:{type:Object,default:()=>({logo:"",name:"",url:"",vip_logo:""})},canEdit:{type:Boolean,default:!0},avatarClass:{type:String,default:"mr-10px"}},emits:["refresh"],setup(t,{emit:_}){l(e=>({v7e6081b3:t.iconEditColor,v1ce103b1:t.iconEditSize}));const I=t,B=_,{updateNum3:A}=a(n()),{t:S}=o(),D=s();r();const R=i(),N=c("target"),W=h(!1),U=T(!1);let V;function j(t){const l=t.remark;l.length<=20?function(t){const l={address:I.address,name:t,chain:I.chain};U.value=!0,function(t){const{$api:l}=e();return l("/botapi/user/editWalletName",{method:"POST",body:t})}(l).then(()=>{$.success(S("success")),A.value++,B("refresh")}).catch(e=>{$.error(e.message)}).finally(()=>{U.value=!1})}(l):$.error(S("maximum10characters"))}return d(()=>{if(N.value){const e=u(N,([e])=>{W.value=e.isIntersecting});V=e.stop}}),p(()=>{V&&V()}),(e,l)=>{var a,n,o;const s=k;return v(),m("div",{ref_key:"target",ref:N,class:"remark-com"},[t.canEdit&&f(W)?(v(),m(b,{key:0},[(null==(n=null==(a=f(D))?void 0:a.userInfo)?void 0:n.evmAddress)||(null==(o=f(R))?void 0:o.address)?(v(),g(y,{key:0,address:t.address,chain:t.chain,remark:t.remark,popoverProps:{width:320,title:f(S)("editRemark"),popperClass:"[&&]:[--el-popover-title-text-color:--main-text] [&&]:[--el-popover-title-font-size:14px]"},onConfirm:j},null,8,["address","chain","remark","popoverProps"])):(v(),g(s,{key:1,name:"custom:remark",class:"text-12px ml-5px clickable icon-remark shrink-0",onClick:w(f(C),["stop","prevent"])},null,8,["onClick"]))],64)):x("",!0)],512)}}}),[["__scopeId","data-v-18cabd2b"]]),xe={key:0,class:"table-empty"},fe={key:1},he={key:1,class:"flex-start"},be=["src"],ge={key:0,class:"border-solid border-0.5px border-#286dff color-#286dff rounded-4px text-10px px-4px py-1px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px ml-10px line-height-15px"},ye=["onMouseenter"],ke={key:0,class:"mr-5px"},we={key:1,class:"bg-[--primary-color] rounded-4px text-10px px-4px py-3px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-19px height-19px"},Ce={key:2,class:"bg-[--signal-green] rounded-4px text-10px px-4px py-3px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-19px height-19px"},$e=["onClick"],Te={class:"font-500 text-12px"},_e={key:2},Ie={class:"flex-between"},Be={class:"text-24px"},Ae={class:"w-480px flex flex-col items-center justify-center mb-20px"},Se={class:"text-14px color-[--secondary-text] mt-26px"},De={class:"color-[--primary-color] mr-4px text-17px"},Re={class:"mt-26px color-[--main-text] text-14px block"},Ne={class:"flex-between"},We={class:"text-20px font-500"},Ue={class:"flex flex-col items-start"},Ve={class:"text-14px color-[--secondary-text] mb-16px"},je={class:"px-10px py-10px text-14px"},Ee={class:"color-[var(--third-text)] text-left text-12px"},Me={class:"color-[var(--main-text)] text-left pl-5px"},ze={key:1},Pe={class:"color-[var(--third-text)] text-left text-12px"},Oe={class:"color-[var(--main-text)] text-left pl-5px"},Fe={class:"color-[var(--main-text)] text-left pl-5px"},He={class:"color-[var(--main-text)] text-left pl-5px"},Ze=_(t({__name:"list",props:{tableData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["refresh","getMultiWalletsAllChain"],setup(t,{emit:l}){var n,r;const i=null==(n=I())?void 0:n.parent,c=null==(r=null==i?void 0:i.exposed)?void 0:r.getMultiWalletsAllChain,{getUserInfo:d}=s(),u=l,{token_logo_url:p,mode:y}=a(B()),{theme:C}=a(A()),{t:_}=o(),ae=S(),{evmAddress:ne}=a(s()),oe=h(!1),se=T(!1),re=T(""),ie=T(null),ce=T(null),de=h(!1),ue=h(0),Ze=T(null),{authInfo:Ke}=a(D()),Le=T({buttonRefs:{},currentBtnRef:{}});function Ye(e){J.confirm(_("walletRemoveTip2"),_("walletRemove"),{type:"warning",icon:X(ee),confirmButtonText:_("confirm"),cancelButtonText:_("cancel"),customClass:`${y.value} delete_confirm`}).then(()=>{var t;(null==(t=Ke.value)?void 0:t.authSetting)?function(e){se.value=!0,re.value="",ie.value=e}(e):J.confirm(_("googleAuthNotBoundTip"),_("bindGoogleAuth"),{type:"warning",icon:X(ee),confirmButtonText:_("goToBind"),cancelButtonText:_("cancel"),customClass:`${y.value} delete_confirm`}).then(()=>{ae.push("/safe")})}).catch(e=>{})}function qe(){var t,l,a,n;if(!re.value||6!==re.value.length)return void $.error(_("authCodeError"));(function(t,l){const{$api:a}=e();return a("/botapi/user/removeWalletV2",{method:"POST",body:{source:"web",evmAddress:t,authCode:l||""}})})((null==(n=null==(a=null==(l=null==(t=ie.value)?void 0:t.balancesInfo)?void 0:l.filter(e=>"bsc"==e.chain))?void 0:a[0])?void 0:n.address)||"",re.value).then(()=>{$.success(_("success")),se.value=!1,re.value="",u("refresh"),d()}).catch(e=>{$.error((null==e?void 0:e.message)||_("fail"))})}function Ge(e){ce.value=e,oe.value=!0,setTimeout(()=>{!async function(){var e,t;const l=document.getElementById("qr-chain-canvas-code");if(!l)return;te.toCanvas({canvas:l,content:(null==(e=ce.value)?void 0:e.address)||"",width:200,nodeQrCodeOptions:{margin:2},logo:{src:`${p.value}chain/${(null==(t=ce.value)?void 0:t.chain)||"bsc"}.png`,logoRadius:8}}).catch(e=>{})}()},200)}function Qe(e){if(e.isChildren){const t=ae.resolve({path:`/address/${e.address}/${e.chain}`});window.open(t.href,"_blank")}}const Je=({row:e})=>e.isChildren?"cursor-pointer":"";return(e,l)=>{const a=F,n=k,o=pe,s=me,r=H,i=L,d=q,p=G,h=R("copy"),$=U;return v(),m("div",null,[N((v(),g(s,{data:t.tableData,style:{width:"100%"},"row-key":"id","tree-props":{children:"balancesInfo",hasChildren:"hasChildren"},"default-expand-all":!1,class:"table-list hidden-scrollbar bot-manage-table","header-row-class-name":"text-12px sticky top-0 z-10 font-500","row-class-name":Je,onRowClick:Qe},{empty:V(()=>{var e;return[t.loading||0!=(null==(e=t.tableData)?void 0:e.length)?(v(),m("span",fe)):(v(),m("div",xe,[W(a)]))]}),default:V(()=>[W(o,{prop:"name",label:e.$t("wallet"),"min-width":200},{default:V(({row:t})=>{var a,o;return[t.isChildren?(v(),m(b,{key:0},[j(E(null==(o=null==(a=t.name)?void 0:a.replace)?void 0:o.call(a,new RegExp("(.{6})(.+)(.{4})"),"$1...$3"))+" ",1),N(W(n,{name:"bxs:copy",class:"ml-5px mb--1px clickable color-[--third-text]",onClick:l[0]||(l[0]=w(()=>{},["stop"]))},null,512),[[h,t.address]])],64)):(v(),m("div",he,[M("img",{class:"mr-8px",style:{"border-radius":"50%"},height:"24",src:("generateAvatarIcon"in e?e.generateAvatarIcon:f(z))((null==t?void 0:t.name)||""),alt:""},null,8,be),j(" "+E(t.name)+" ",1),W(ve,{remark:t.remark,address:t.evmAddress,chain:"bsc",showAddress:!0,onRefresh:l[1]||(l[1]=e=>u("refresh"))},null,8,["remark","address"]),f(ne)==t.evmAddress?(v(),m("span",ge,E(e.$t("currentWallet")),1)):x("",!0)]))]}),_:1},8,["label"]),W(o,{prop:"chain",label:e.$t("chain"),align:"right"},{default:V(({row:t})=>{var l;return[j(E(null==(l=("getChainInfo"in e?e.getChainInfo:f(P))(null==t?void 0:t.chain))?void 0:l.name),1)]}),_:1},8,["label"]),W(o,{prop:"balance",label:e.$t("balance1"),align:"right"},{default:V(({row:t,$index:a})=>[M("div",{ref:e=>f(Le).currentBtnRef[a]=e,onMouseenter:e=>function(e,t){var l,a,n;de.value=!0,ue.value=t,Ze.value={...e},(null==(l=Ze.value)?void 0:l.balancesInfo)&&(Ze.value.balancesInfo=null==(n=null==(a=Ze.value)?void 0:a.balancesInfo)?void 0:n.reduce((e,t)=>{if(["eth","base"].includes(t.chain)){const l=e.find(e=>"eth"===e.chain);l?l.mainTokenBalance=new le(l.mainTokenBalance).plus(t.mainTokenBalance).toFixed():e.push({...t,chain:"eth"})}else e.push(t);return e},[]))}(t,a),onMouseleave:l[2]||(l[2]=e=>de.value=!1)}," $"+E(("formatNumber"in e?e.formatNumber:f(O))((null==t?void 0:t.balance)||0,2)),41,ye)]),_:1},8,["label"]),W(o,{prop:"source",label:e.$t("origin"),align:"right"},{default:V(({row:t})=>[(null==t?void 0:t.isChildren)?x("",!0):(v(),m(b,{key:0},[t.source?(v(),m("span",ke,E(t.source),1)):x("",!0),1==t.genSource?(v(),m("span",we,E(e.$t("import")),1)):(v(),m("span",Ce,E(e.$t("create")),1))],64))]),_:1},8,["label"]),W(o,{label:e.$t("operate"),align:"right"},{default:V(({row:e})=>["delete"==e.operate&&f(ne)!==e.evmAddress?(v(),g(n,{key:0,class:"text-14px text-[--third-text] cursor-pointer hover:color-[--main-text]",name:"ic:baseline-delete",onClick:w(t=>async function(e){c&&(await c(),Number(null==e?void 0:e.balance)>0?J.confirm(_("walletRemoveTip1"),_("walletRemove"),{type:"warning",icon:X(ee),confirmButtonText:_("confirm"),cancelButtonText:_("cancel"),customClass:`${y.value} delete_confirm`}).then(()=>{Ye(e)}):Ye(e))}(e),["stop","prevent"])},null,8,["onClick"])):(null==e?void 0:e.isChildren)?(v(),m("div",{key:1,class:"bg-[--main-input-button-bg] rounded-4px inline-flex items-center gap-4px py-2px px-4px cursor-pointer",onClick:w(t=>Ge(e),["stop","prevent"])},[W(n,{name:"custom:download",class:"text-10px"}),M("span",Te,E(f(_)("deposit2")),1)],8,$e)):(v(),m("span",_e))]),_:1},8,["label"])]),_:1},8,["data"])),[[$,t.loading]]),W(r,{modelValue:f(oe),"onUpdate:modelValue":l[4]||(l[4]=e=>K(oe)?oe.value=e:null),width:"500",class:Z([f(C)]),centered:!0,"append-to-body":"","close-on-click-modal":!1,"popper-style":{padding:"20px","border-radius":"8px"},"show-close":!1,"destroy-on-close":""},{header:V(()=>[M("div",Ie,[M("span",Be,E(e.$t("deposit2")),1),W(n,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:l[3]||(l[3]=w(e=>oe.value=!1,["stop","prevent"]))})])]),default:V(()=>{var t,a,n;return[M("div",Ae,[l[9]||(l[9]=M("canvas",{id:"qr-chain-canvas-code"},null,-1)),M("div",Se,[M("span",De,E(null==(a=("getChainInfo"in e?e.getChainInfo:f(P))((null==(t=f(ce))?void 0:t.chain)||""))?void 0:a.name),1),j(E(e.$t("walletAddress")),1)]),M("span",Re,E(null==(n=f(ce))?void 0:n.address),1)])]}),_:1},8,["modelValue","class"]),W(r,{modelValue:f(se),"onUpdate:modelValue":l[7]||(l[7]=e=>K(se)?se.value=e:null),width:"480","align-center":"","close-on-click-modal":!1,"show-close":!1,"destroy-on-close":"","append-to-body":""},{header:V(()=>[M("div",Ne,[M("span",We,E(e.$t("DbCheckTitle2")),1),W(n,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:l[5]||(l[5]=w(e=>se.value=!1,["stop","prevent"]))})])]),default:V(()=>[M("div",Ue,[M("div",Ve,E(e.$t("authCode")),1),W(i,{modelValue:f(re),"onUpdate:modelValue":l[6]||(l[6]=e=>K(re)?re.value=e:null),placeholder:e.$t("authCodeError"),autofocus:"",maxlength:"6",class:"mb-24px",size:"large",onKeyup:Y(qe,["enter"])},null,8,["modelValue","placeholder"]),W(d,{type:"primary",size:"large",class:"w-full",onClick:qe},{default:V(()=>[j(E(e.$t("confirm")),1)]),_:1})])]),_:1},8,["modelValue"]),W(p,{visible:f(de),"onUpdate:visible":l[8]||(l[8]=e=>K(de)?de.value=e:null),persistent:!1,"virtual-ref":f(Le).currentBtnRef[f(ue)],"virtual-triggering":"",trigger:"contextmenu",placement:"right","popper-class":"text-center","popper-style":{padding:0,"border-radius":"8px"}},{default:V(()=>{var t,a,n,o,s,r,i;return[M("table",je,[M("tbody",null,[(null==(t=f(Ze))?void 0:t.balancesInfo)?(v(!0),m(b,{key:0},Q(null==(a=f(Ze))?void 0:a.balancesInfo,(t,l)=>{var a;return v(),m("tr",{key:l},[M("td",Ee,E(null==(a=("getChainInfo"in e?e.getChainInfo:f(P))((null==t?void 0:t.chain)||""))?void 0:a.main_name),1),M("td",Me,E(("formatNumber"in e?e.formatNumber:f(O))((null==t?void 0:t.mainTokenBalance)||0,2)),1)])}),128)):(v(),m("tr",ze,[M("td",Pe,E((null==(o=("getChainInfo"in e?e.getChainInfo:f(P))((null==(n=f(Ze))?void 0:n.chain)||""))?void 0:o.main_name)||e.$t("mainToken")),1),M("td",Oe,E(("formatNumber"in e?e.formatNumber:f(O))((null==(s=f(Ze))?void 0:s.mainTokenBalance)||0,2)),1)])),M("tr",null,[l[10]||(l[10]=M("td",{class:"color-[var(--third-text)] text-left text-12px"},"USDT",-1)),M("td",Fe,E(("formatNumber"in e?e.formatNumber:f(O))((null==(r=f(Ze))?void 0:r.usdtTokenBalance)||0,2)),1)]),M("tr",null,[l[11]||(l[11]=M("td",{class:"color-[var(--third-text)] text-left text-12px"},"USDC",-1)),M("td",He,E(("formatNumber"in e?e.formatNumber:f(O))((null==(i=f(Ze))?void 0:i.usdcTokenBalance)||0,2)),1)])])])]}),_:1},8,["visible","virtual-ref"])])}}}),[["__scopeId","data-v-33374fa0"]]),Ke={class:"tabs"},Le={class:"text-14px color-[--main-text]"},Ye={class:"text-12px color-[--third-text] mt-8px"},qe={class:"import part mt-24px"},Ge={class:"text-12px color-[--secondary-text] mb-10px block"},Qe={class:"grid grid-cols-3 gap-2"},Je={class:"error-message"},Xe={key:0},et={class:"flex-between"},tt=_(t({__name:"import",emits:["refresh"],setup(t,{emit:l}){const n=l,{showImport:r}=a(B()),i=s(),{t:c}=o(),d=T(!1),u=T(Array(12).fill("")),p=T([]),h=T(""),y=ne(()=>u.value.join(" ").trim());const C=()=>{var t;if(u.value.some(e=>!e.trim()))return void(h.value=c("importTip1eTips2"));d.value=!0;const l=(null==(t=null==i?void 0:i.userInfo)?void 0:t.tgUid)||"",a=function(e,t){const l=se.enc.Base64.stringify(se.enc.Utf8.parse(e)),a=se.SHA256(t),n=se.lib.WordArray.create(a.words.slice(0,4));return se.AES.encrypt(l,a,{mode:se.mode.CBC,iv:n,padding:se.pad.Pkcs7}).ciphertext.toString(se.enc.Base64)}(y.value,l);(function(t){const{$api:l}=e();return l("/botapi/user/importWallet",{method:"POST",body:{source:"web",encryptedMnemonic:t}})})(a).then(e=>{$.success(c("success")),n("refresh"),r.value=!1,_()}).catch(e=>{$.error(String(e))}).finally(()=>{d.value=!1})};function _(){u.value=Array(12).fill(""),h.value=""}return(e,t)=>{const l=k,a=L,n=q;return f(r)?(v(),m("div",{key:0,class:"pop-right",onClick:t[2]||(t[2]=e=>r.value=!1)},[N(M("div",{class:"content",style:{flex:"1","max-width":"450px","overflow-y":"auto","overflow-x":"hidden"},onClick:t[1]||(t[1]=w(()=>{},["stop","prevent"]))},[M("div",Ke,[M("div",null,E(e.$t("importWallet")),1),W(l,{name:"line-md:close",class:"text-20px color-[--main-text]",onClick:t[0]||(t[0]=e=>r.value=!1)})]),M("div",null,[M("span",Le,E(e.$t("allChain"))+" "+E(e.$t("automaticRecognition")),1),M("div",Ye,E(e.$t("importBotTip")),1)]),M("div",qe,[M("span",Ge,E(e.$t("mnemonic")),1),M("div",Qe,[(v(!0),m(b,null,Q(f(u),(e,t)=>(v(),g(a,{ref_for:!0,ref_key:"inputs",ref:p,key:t,modelValue:f(u)[t],"onUpdate:modelValue":e=>f(u)[t]=e,class:"input",placeholder:`${t+1}`,onInput:e=>((e,t)=>{let l=e.replace(/[^a-zA-Z]/g,"").toLowerCase();u.value[t]=l,e=l,12==(null==u?void 0:u.value.length)&&(h.value="")})(e,t),onKeydown:Y(e=>{return a=t,void(" "!==(l=e).key&&"Enter"!==(null==l?void 0:l.key)||(l.preventDefault(),oe(()=>{var e;return null==(e=p.value[a+1])?void 0:e.focus()})));var l,a},["enter"]),onPaste:e=>(e=>{var t,l,a;const n=null==(l=null==(t=e.clipboardData.getData("text"))?void 0:t.trim())?void 0:l.toLowerCase(),o=null==(a=null==n?void 0:n.replace(/\s+/g," "))?void 0:a.split(" ");12==(null==o?void 0:o.length)&&(e.preventDefault(),/^[a-zA-Z\s]+$/.test(n)?o.forEach((e,t)=>{u.value[t]=e}):$.error(c("importTip1eTips")))})(e)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput","onKeydown","onPaste"]))),128))]),M("div",Je,[f(h)?(v(),m("span",Xe,E(f(h)),1)):x("",!0)]),M("div",et,[W(n,{class:"width100 button",size:"small",onClick:w(_,["stop","prevent"])},{default:V(()=>[j(E(e.$t("reset")),1)]),_:1}),W(n,{class:"width100 button",block:"",size:"small",type:"primary",loading:f(d),onClick:w(C,["stop"])},{default:V(()=>[j(E(e.$t("confirm")),1)]),_:1},8,["loading"])])])],512),[[ae,f(r)]])])):x("",!0)}}}),[["__scopeId","data-v-d1ea0a81"]]),lt={class:"tabs"},at={class:"part mt-24px"},nt={class:"flex-between mb-5px"},ot={class:"flex gap-8px"},st=["onClick"],rt={class:"flex-between py-8px"},it={class:"flex-start"},ct={class:"ml-4px"},dt={class:"ml-9px"},ut=_(t({__name:"record",props:{tableData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const{showBotRecord:t}=a(B()),{t:l}=o(),n=e,s=T("all"),r=ne(()=>[{id:"all",name:l("all")},{id:"import",name:l("importWallet")},{id:"create",name:l("create")},{id:"delete",name:l("delete")}]),i=ne(()=>{const e=[...n.tableData];return"all"==s.value?e:null==e?void 0:e.filter(e=>e.status==s.value)});return(e,a)=>{const n=k,o=R("copy");return f(t)?(v(),m("div",{key:0,class:"pop-right",onClick:a[3]||(a[3]=e=>t.value=!1)},[N(M("div",{class:"content",style:{flex:"1","max-width":"450px","overflow-y":"auto","overflow-x":"hidden"},onClick:a[2]||(a[2]=w(()=>{},["stop","prevent"]))},[M("div",lt,[M("div",null,E(e.$t("operateHistory")),1),W(n,{name:"line-md:close",class:"text-20px color-[--main-text]",onClick:a[0]||(a[0]=e=>t.value=!1)})]),M("div",at,[M("div",nt,[M("div",ot,[(v(!0),m(b,null,Q(f(r),(e,t)=>(v(),m("span",{key:t,class:Z(["py-4px text-12px px-8px rounded-4px bg-[--main-input-button-bg] color-[--secondary-text] flex items-center justify-center cursor-pointer",{active:f(s)==e.id}]),onClick:w(t=>{return l=e.id,void(s.value=l);var l},["stop","prevent"])},E(e.name),11,st))),128))]),M("span",null,E(e.$t("time")),1)]),(v(!0),m(b,null,Q(f(i),(t,s)=>{var r,i;return v(),m("div",rt,[M("div",it,["create"==t.status?(v(),g(n,{key:0,name:"majesticons:plus-circle",class:"text-12px color-[--signal-green]"})):"delete"==t.status?(v(),g(n,{key:1,name:"majesticons:minus-circle",class:"text-12px color-[--signal-red]"})):"import"==t.status?(v(),g(n,{key:2,name:"mingcute:new-folder-fill",class:"text-12px color-[--primary-color]"})):x("",!0),M("span",ct,E((i=t.status||"",{import:l("importWallet"),create:l("createWallet"),delete:l("walletRemove")}[i]||"")),1),M("span",dt,E(t.name||"Wallet "+(null==(r=t.evmAddress)?void 0:r.slice(-4))),1),N(W(n,{name:"bxs:copy",class:"ml-5px mb--1px clickable color-[--third-text]",onClick:a[1]||(a[1]=w(()=>{},["stop"]))},null,512),[[o,null==t?void 0:t.evmAddress]])]),M("span",null,E(("formatDate"in e?e.formatDate:f(re))(null==t?void 0:t.updateTime,"YYYY/MM/DD HH:mm:ss")),1)])}),256))])],512),[[ae,f(t)]])])):x("",!0)}}}),[["__scopeId","data-v-d8b9bcf3"]]),pt={class:"bg-[--secondary-bg] flex-1 w-100% px-200px pt-40px overflow-y-auto bot-manage",style:{height:"calc(100vh - 150px)"}},mt={class:"mb-8px flex-between items-center"},vt={class:"text-16px font-500"},xt={key:0},ft={class:"flex-between"},ht={class:"text-24px"},bt={key:0,class:"mask text-center color-[--main-text] absolute bg-[--border] top-0 right-0 left-0 bottom-0 flex items-center justify-center z-1 text-14px cursor-pointer"},gt={class:"grid grid-cols-3 gap-2 mt-30px"},yt={class:"color-[--third-text] rounded-4px text-10px px-4px py-1px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-15px absolute left-2px top-2px"},kt={class:"text-center mt-30px flex-between"},wt=t({__name:"index",setup(t,{expose:l}){l({getMultiWalletsAllChain:pe});const{t:n}=o(),{showImport:r,mode:i,showBotRecord:c}=a(B()),{getUserInfo:u}=s(),{theme:y,isDark:C}=a(A()),_=s(),I=h(!1),S=h(!1),D=h(!0),U=ie("encryptedMnemonic","",sessionStorage),z=h(!1),P=T([]),O=T([]),F=h(!1),L=h(!1),Y=T(0),G=T(!1);let te=null;const le=ne(()=>{var e;const t=U.value||"",l=(null==(e=null==_?void 0:_.userInfo)?void 0:e.tgUid)||"";if(t&&l){return de(t,l).split(" ")||[]}return[]}),ae=ne(()=>(null==_?void 0:_.evmAddress)||"");function oe(){G.value||(pe(),se(10))}ce(()=>ae.value,e=>{e?pe():(P.value=[],O.value=[])}),d(()=>{pe(),te&&clearInterval(te)}),p(()=>{te&&(clearInterval(te),te=null)});const se=e=>{Y.value=e,G.value=!0,te=ue(()=>{Y.value--,Y.value<=0&&(clearInterval(te),te=null,G.value=!1)},1e3)};function re(){F.value=!0,function(){const{$api:t}=e();return t("/botapi/user/getWalletOperationRecord",{method:"get"})}().then(e=>{const t=Array.isArray(e)?null==e?void 0:e.map(e=>({...e,updateTime:"1970-01-01T00:00:00Z"!==(null==e?void 0:e.updateTime)&&"0001-01-01T00:00:00Z"!==(null==e?void 0:e.updateTime)?new Date(e.updateTime).getTime():0})):[];null==t||t.sort((e,t)=>Number(null==t?void 0:t.updateTime)-Number(null==e?void 0:e.updateTime)),O.value=t,c.value=!0}).catch(e=>{$.error(e)}).finally(()=>{F.value=!1})}function pe(){return new Promise((t,l)=>{z.value=!0;const a=_.isSupportChains;(function(t){const{$api:l}=e();return l("/botapi/swap/getMultiWalletsBalance",{method:"get",params:{chain:t}})})(null==a?void 0:a.join(",")).then(e=>{P.value=Array.isArray(e)?null==e?void 0:e.map((e,t)=>{var l,a,n,o,s,r,i,c;return{id:`parent-${t}`,tgUid:e.tgUid,address:e.tgUid,name:e.name,source:e.source,operate:"delete",genSource:e.genSource,evmAddress:(null==(n=null==(a=null==(l=e.balancesInfo)?void 0:l.filter(e=>"bsc"==e.chain))?void 0:a[0])?void 0:n.address)||"",balance:null==(o=null==e?void 0:e.balancesInfo)?void 0:o.reduce((e,t)=>e+Number(t.balance),0),mainTokenBalance:null==(s=null==e?void 0:e.balancesInfo)?void 0:s.reduce((e,t)=>e+Number(t.mainTokenBalance),0),usdcTokenBalance:null==(r=null==e?void 0:e.balancesInfo)?void 0:r.reduce((e,t)=>e+Number(t.usdcTokenBalance),0),usdtTokenBalance:null==(i=null==e?void 0:e.balancesInfo)?void 0:i.reduce((e,t)=>e+Number(t.usdtTokenBalance),0),balancesInfo:null==(c=e.balancesInfo)?void 0:c.map((e,l)=>({...e,id:`child-${t}-${l}`,name:e.address,operate:"deposit",isChildren:!0}))}}):[],t(P.value)}).catch(e=>{$.error(e),l([])}).finally(()=>{z.value=!1,L.value=!1})})}function me(){J.confirm(n("createWalletTip"),n("createWallet"),{type:"warning",icon:X(ee),confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),customClass:`${i.value} delete_confirm`}).then(()=>{I.value=!0,function(){const{$api:t}=e();return t("/botapi/user/generateWallet",{method:"POST",body:{source:"web"}})}().then(e=>{U.value=null==e?void 0:e.Mnemonic,D.value=!0,S.value=!0,ve(),u()}).catch(e=>{$.error(String(e))}).finally(()=>{I.value=!1})}).catch(e=>{})}function ve(){pe()}const xe=()=>{J.confirm(n("lastChance"),n("tips"),{type:"warning",icon:X(ee),confirmButtonText:n("saved"),cancelButtonText:n("cancel"),customClass:`${i.value} delete_confirm`}).then(()=>{U.value="",S.value=!1}).catch(e=>{})};return(e,t)=>{const l=k,a=q,n=H,o=R("copy");return v(),m("div",pt,[M("div",mt,[M("span",vt,E(e.$t("walletList")),1),f(ae)?(v(),m("span",{key:0,class:"text-16px font-500 color-[--third-text] ml-40px cursor-pointer",onClick:re},E(e.$t("operateHistory")),1)):x("",!0),t[5]||(t[5]=M("div",{class:"flex-1"},null,-1)),f(ae)?(v(),g(a,{key:1,class:"text-12px",size:"small",onClick:w(oe,["stop","prevent"]),disabled:f(G)},{default:V(()=>[f(Y)>0?(v(),m("span",xt,E(f(Y))+"S",1)):(v(),g(l,{key:1,name:"material-symbols:sync-outline",class:"text-12px"}))]),_:1},8,["disabled"])):x("",!0),f(ae)?(v(),g(a,{key:2,class:"text-12px",size:"small",type:"primary",onClick:w(me,["stop","prevent"]),loading:f(I)},{default:V(()=>[W(l,{name:"custom:wallet-fill",class:"text-12px mr-4px"}),j(E(e.$t("createWallet")),1)]),_:1},8,["loading"])):x("",!0),f(ae)?(v(),g(a,{key:3,class:"text-12px",size:"small",onClick:t[0]||(t[0]=w(e=>r.value=!0,["stop","prevent"]))},{default:V(()=>[W(l,{name:"mingcute:new-folder-fill",class:"text-102x mr-4px"}),j(E(e.$t("importWallet")),1)]),_:1})):x("",!0)]),W(Ze,{tableData:f(P),loading:f(z),onRefresh:ve},null,8,["tableData","loading"]),W(tt,{onRefresh:ve}),W(ut,{tableData:f(O),loading:f(F)},null,8,["tableData","loading"]),W(n,{modelValue:f(S),"onUpdate:modelValue":t[4]||(t[4]=e=>K(S)?S.value=e:null),width:"500",height:"630",class:Z(["dialog-connect1",f(y)]),"append-to-body":"","close-on-click-modal":!1,"show-close":!1,"destroy-on-close":""},{header:V(()=>[M("div",ft,[M("span",ht,E(e.$t("mnemonic")),1),W(l,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:t[1]||(t[1]=w(e=>S.value=!1,["stop","prevent"]))})])]),default:V(()=>{var n;return[M("div",{class:"relative min-h-160px",onClick:t[2]||(t[2]=e=>D.value=!1)},[f(D)?(v(),m("div",bt,[W(l,{name:"custom:show-code",class:"text-16px mr-4px color-[--main-text]"}),j(" "+E(e.$t("clickMnemonic")),1)])):x("",!0),M("div",gt,[(v(!0),m(b,null,Q(f(le),(e,t)=>(v(),m("div",{class:"mnemonic-item block border border-solid border-[--dialog-divider] py-8px text-center relative",key:t},[M("span",yt,E(t+1),1),j(" "+E(e),1)]))),128))])]),M("div",kt,[N((v(),g(a,{class:"flex-1",style:{height:"48px"},onClick:t[3]||(t[3]=w(()=>{},["stop","prevent"]))},{default:V(()=>[j(E(e.$t("copyMnemonic")),1)]),_:1})),[[o,null==(n=f(le))?void 0:n.join(" ")]]),W(a,{class:"flex-1",style:{height:"48px"},type:"primary",onClick:w(xe,["stop","prevent"])},{default:V(()=>[j(E(e.$t("continue")),1)]),_:1})])]}),_:1},8,["modelValue","class"])])}}});export{wt as default};
