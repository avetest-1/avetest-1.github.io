import{f as l,R as e,Q as a,z as t,g as s,r as n,v as o,a0 as i,I as d,m as u,n as c,c as x,o as r,a as v,t as A,i as p,aK as m,d as h,G as b,b as f,w as g,s as S,aE as K,F as k,D as I,K as C,bt as q,J as y,H as T,gT as W,gU as O,gV as F,gW as E,a2 as V,k as z,bv as J,gX as R,fe as H,_ as X}from"./CcL3nfnm.js";import{_ as j}from"./Cto5UsVA.js";const w={class:"bg-[--secondary-bg] w-full flex justify-center h-[calc(100vh-92px)] overflow-y-auto"},N={class:"py-40px"},G={class:"text-24px color-[--main-text] font-500"},U={class:"mt-6px color-[--secondary-text] text-12px"},Y={class:"flex justify-center mt-20px pb-20px"},M={class:"w-678px max-w-50vw mr-42px"},Q={class:"flex items-center gap-8px"},B={class:"text-14px b b-solid b-[--main-divider] h-44px px-12px flex items-center rd-8px flex-1"},L={class:"text-14px b b-solid b-[--main-divider] h-44px px-12px flex items-center rd-8px flex-1"},D={class:"mt-20px mb-10px color-[--secondary-text] text-14px"},P={class:"text-14px b b-solid b-[--main-divider] p-12px rd-8px min-h-400px h-[calc(100vh-492px)] max-h-600px overflow-y-auto relative"},Z={class:"color-#9CA3AF flex items-center absolute top-12px left-12px"},$={class:"color-[--main-text]"},_={class:"text-12px ml-2px"},ll={class:"text-14px color-[--secondary-text] mt-20px mb-10px mt-20px"},el={class:"b b-solid b-[--main-divider] h-44px px-12px flex items-center rd-8px"},al={class:"flex items-center mt-20px"},tl={class:"w-500px pl-42px b-l b-l-solid b-l-[--main-divider] lh-20px"},sl={class:"text-20px font-500 mb-10px"},nl={class:"text-14px font-500 mb-8px"},ol={class:"text-14px font-400 color-[--third-text] mb-20px"},il={class:"text-14px font-500 mb-8px"},dl={class:"text-14px font-400 color-[--third-text] mb-20px"},ul={class:"text-14px font-500 mb-8px"},cl={class:"text-14px font-400 color-[--third-text]"},xl={href:"https://solana.com/zh/docs/core/accounts",target:"_blank",class:"underline clickable"},rl=X(l({__name:"index",setup(l){const X=e(),rl=a(),vl=t(),Al=s((()=>{var l,e,a,t;return(null==(t=null==(a=null==(e=null==(l=null==rl?void 0:rl.userInfo)?void 0:l.addresses)?void 0:e.find)?void 0:a.call(e,(l=>"solana"===(null==l?void 0:l.chain))))?void 0:t.address)||X.address||""})),pl=n([]),ml=n("0"),hl=n("0"),bl=n(!1),fl=n(!1),{t:gl}=o(),Sl=s((()=>new i(hl.value).times(kl.value.length||0).toFixed()));s((()=>new i(hl.value).times(pl.value.length||0).toFixed()));const Kl=n(!1),kl=d([]),Il=n(!0),Cl=l=>{var e,a;kl.value=l?null==(a=null==(e=null==pl?void 0:pl.value)?void 0:e.slice(0,20))?void 0:a.map((l=>l.tokenAccount)):[];const t=kl.value.length;Il.value=t>0&&t<pl.value.length},ql=l=>{const e=l.length;Kl.value=e===pl.value.length||kl.value.length>=20,Il.value=e>0&&e<pl.value.length};function yl(){const l=kl.value.map((l=>{var e;return{mint:(null==(e=pl.value.find((e=>e.tokenAccount===l)))?void 0:e.mint)||"",tokenAccount:l}}));bl.value=!0;let e=null;E({closeAccounts:l}).then((l=>(fl.value=!0,e=V({message:gl("loadingCloseAccount"),plain:!0,icon:z(j,{color:"var(--d-F5F5F5-l-666)",strokeWidth:5}),customClass:"loading-close-account"}),l.wait()))).then((()=>{var l;bl.value=!1,fl.value=!1,V({message:gl("closeAccountsSuccess"),type:"success",plain:!0}),e&&(null==(l=null==e?void 0:e.close)||l.call(e)),Tl(),J().updateHolderNum++,kl.value=[]})).catch((l=>{var a,t,s,n,o,i;if(bl.value=!1,fl.value=!1,e&&(null==(a=null==e?void 0:e.close)||a.call(e)),rl.accessToken&&(null==(o=null==(n=null==(s=null==(t=null==rl?void 0:rl.userInfo)?void 0:t.addresses)?void 0:s.find)?void 0:n.call(s,(l=>"solana"===(null==l?void 0:l.chain))))?void 0:o.address)){const e="string"==typeof l?l:(null==(i=null==l?void 0:l.data)?void 0:i.message)||(null==l?void 0:l.message)||(null==l?void 0:l.msg);V({message:R(e),type:"error",plain:!0})}else H(l,"solana")}))}function Tl(){var l;(null==X?void 0:X.address)&&"solana"!==(null==X?void 0:X.chain)?pl.value=[]:O(Al.value).then((l=>{pl.value=l})),null==(l=F)||l(Al.value).then((l=>{ml.value=(null==l?void 0:l.balance)||"0"}))}return u(Al,(l=>{l&&Tl()}),{immediate:!0}),c((()=>{W().then((l=>{hl.value=new i(l).shiftedBy(-9).toFixed()}))})),(l,e)=>{var a,t,s,n;const o=K,i=q,d=T;return r(),x("div",w,[v("div",N,[v("h3",G,"Solana "+A(l.$t("rentRecovery")),1),v("div",U,A(l.$t("rentRecoveryDesc")),1),v("div",Y,[v("div",M,[v("div",Q,[v("div",B,[v("span",null,"SOL "+A(l.$t("balance1"))+": "+A(("formatNumber2"in l?l.formatNumber2:p(m))(p(ml),3))+" SOL",1)]),v("div",L,[v("span",null,A(l.$t("recyclableTokens"))+": "+A((null==(a=p(pl))?void 0:a.length)||0),1)])]),v("div",D,A(l.$t("selectClosedTokenAccount")),1),v("div",P,[v("div",Z,[v("span",$,A(l.$t("selectedToken")),1),v("span",{class:b((null==(t=p(kl))?void 0:t.length)>0?"color-#3F80F7":"")},A((null==(s=p(kl))?void 0:s.length)||0),3),e[3]||(e[3]=h("/")),v("span",null,A((null==(n=p(pl))?void 0:n.length)||0),1),v("span",_,"("+A(p(gl)("limitRent"))+")",1)]),e[4]||(e[4]=v("div",{class:"h-16px mb-15px"},null,-1)),v("div",null,[f(o,{modelValue:p(Kl),"onUpdate:modelValue":e[0]||(e[0]=l=>S(Kl)?Kl.value=l:null),indeterminate:p(Il),onChange:Cl},{default:g((()=>[h(A(l.$t("selectAll")),1)])),_:1},8,["modelValue","indeterminate"]),f(i,{modelValue:p(kl),"onUpdate:modelValue":e[1]||(e[1]=l=>S(kl)?kl.value=l:null),onChange:ql},{default:g((()=>[(r(!0),x(k,null,I(p(pl),(l=>(r(),C(o,{key:l.tokenAccount,value:l.tokenAccount,shape:"square",class:"mt-10px flex!",disabled:p(kl).length>=20&&!p(kl).includes(l.tokenAccount)},{default:g((()=>[h(A(l.symbol||"UNKNOWN"),1)])),_:2},1032,["value","disabled"])))),128))])),_:1},8,["modelValue"])])]),v("div",ll,A(l.$t("availableRent")),1),v("div",el,[e[5]||(e[5]=v("img",{class:"w-24px mr-8px",src:"data:image/png;base64,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",alt:"",srcset:""},null,-1)),v("span",null,A(("formatNumber2"in l?l.formatNumber2:p(m))(p(Sl),3))+" SOL",1)]),v("div",al,[(r(),C(d,{key:p(vl).theme,color:"var('--border')",class:"flex-1 mr-15px! max-h-40px rd-8px!",size:"large",onClick:e[2]||(e[2]=y((l=>kl.value=[]),["stop"]))},{default:g((()=>[h(A(l.$t("reset")),1)])),_:1})),f(d,{type:"primary",class:"flex-1 max-h-40px rd-8px!",size:"large",loading:p(bl),disabled:!p(kl).length||!p(Al),onClick:y(yl,["stop"])},{default:g((()=>[h(A(l.$t("submit")),1)])),_:1},8,["loading","disabled"])])]),v("div",tl,[v("h2",sl,A(l.$t("question")),1),v("h3",nl,A(l.$t("question1Title")),1),v("div",ol,A(l.$t("question1Content")),1),v("h3",il,A(l.$t("question2Title")),1),v("div",dl,A(l.$t("question2Content")),1),v("h3",ul,A(l.$t("question3Title")),1),v("div",cl,[h(A(l.$t("question3Content"))+" ",1),v("a",xl,A(l.$t("question3Content2")),1)])])])])])}}}),[["__scopeId","data-v-9c3fde25"]]);export{rl as default};
