import{c2 as e,p2 as a,p3 as s,e$ as l,p4 as t,c6 as r,f as o,c8 as i,g as n,c as d,o as u,a as c,B as p,bQ as m,K as v,i as f,G as g,an as w,t as y,ce as h,Q as b,bv as _,ah as $,y as C,v as x,r as k,j as P,m as V,n as S,q as T,b as q,a4 as E,d as M,w as R,e_ as z,bx as F,by as j,be as A,N as B,F as U,H as D,J as I,bd as L,a2 as Q,_ as Z}from"./CcL3nfnm.js";import{s as G}from"./DljY6VQ4.js";import{s as H}from"./DSXY0Md2.js";const J={primary:"icon-primary",success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},K={[J.primary]:a,[J.success]:t,[J.warning]:l,[J.error]:s,[J.info]:a},N=e({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["primary","success","warning","info","error"],default:"info"}}),O=o({name:"ElResult"});const W=h(r(o({...O,props:N,setup(e){const a=e,s=i("result"),l=n((()=>{const e=a.icon,s=e&&J[e]?J[e]:"icon-info";return{class:s,component:K[s]||K["icon-info"]}}));return(e,a)=>(u(),d("div",{class:g(f(s).b())},[c("div",{class:g(f(s).e("icon"))},[m(e.$slots,"icon",{},(()=>[f(l).component?(u(),v(w(f(l).component),{key:0,class:g(f(l).class)},null,8,["class"])):p("v-if",!0)]))],2),e.title||e.$slots.title?(u(),d("div",{key:0,class:g(f(s).e("title"))},[m(e.$slots,"title",{},(()=>[c("p",null,y(e.title),1)]))],2)):p("v-if",!0),e.subTitle||e.$slots["sub-title"]?(u(),d("div",{key:1,class:g(f(s).e("subtitle"))},[m(e.$slots,"sub-title",{},(()=>[c("p",null,y(e.subTitle),1)]))],2)):p("v-if",!0),e.$slots.extra?(u(),d("div",{key:2,class:g(f(s).e("extra"))},[m(e.$slots,"extra")],2)):p("v-if",!0)],2))}}),[["__file","result.vue"]])),X={key:1,class:"title2"},Y={key:3,class:"tip"},ee=Z(o({__name:"reset",props:{cType:{type:String,required:!0,validator:e=>["login","register","reset"].includes(e)}},emits:["update:c-type"],setup(e,{emit:a}){const s=a,l=e,t=b(),r=_(),{mode:o,lang:i}=$(C()),{t:m}=x(),w=k(60),h=k(!1),Z=k(!1),J=k(!1),K=k(!1),N=k(m("startForgetPassword")),O=k(m("next")),ee=k(1),ae=k(),se=k(null),le=P({email:r.email,verificationCode:"",password:"",confirmPassword:""}),te=n((()=>({email:[{required:!0,message:m("startEmailRequiredMsg"),trigger:"blur"},{type:"email",message:m("startEmailError"),trigger:["blur","change"]}],verificationCode:[{required:!0,message:m("startVerificationCodeRequiredMsg"),trigger:"blur"}],password:[{required:!0,message:m("startPasswordRequiredMsg"),trigger:"blur"},{pattern:/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)[A-Za-z\d@#$%^&*!]{8,20}$/,message:m("startPasswordError"),trigger:"blur"}],confirmPassword:[{required:!0,message:m("startConfirmPasswordRequiredMsg"),trigger:"blur"},{validator:oe,trigger:"blur"}]})));function re(){1===ee.value?s("update:c-type","login"):2===ee.value&&(ee.value=1,N.value=m("startForgetPassword"),O.value=m("next"))}function oe(e,a,s){a!==le.password?s(new Error(m("startConfirmPasswordError"))):s()}function ie(){var e;null==(e=ae.value)||e.validate((e=>{e&&(1===ee.value?(O.value=m("confirm"),de(),ee.value=2):2===ee.value?(J.value=!0,r.verifyRecoverCode({email:le.email,code:le.verificationCode}).then((()=>{r.updateEmailPassword({email:le.email,code:le.verificationCode,newPassword:G(le.password).toString()}).then((()=>{J.value=!1,O.value=m("returnToLogin"),ee.value=3})).catch((e=>{Q.error(String(e)),J.value=!1}))})).catch((e=>{J.value=!1,Q.error(String(e))}))):s("update:c-type","login"))}))}function ne(){Z.value=!0,r.sendEmailCode({email:null==le?void 0:le.email,language:"zh-cn"==i.value||"zh-tw"==i.value?"cn":"en",emailType:"updatePassword"}).then((()=>{h.value=!0,K.value=!1,se.value=H((()=>{w.value>0?w.value--:(clearInterval(se.value),se.value=null,Z.value=!1,h.value=!1,w.value=60)}),1e3)})).catch((e=>{Q.error(String(e)),se.value||(Z.value=!1),K.value=!1}))}function de(){K.value=!0,ne()}return V([()=>r.email,()=>l.cType],(e=>{"reset"===l.cType&&(le.email=r.email)})),V((()=>t.connectVisible),(()=>{ee.value=1,N.value=m("startForgetPassword"),O.value=m("next")})),S((()=>{})),T((()=>{se.value&&clearInterval(se.value)})),(e,a)=>{const s=F,l=B,t=A,r=D,i=W,n=L;return u(),d("div",{class:g(["w-reset",f(o)])},[3!==f(ee)?(u(),d("h3",{key:0,class:"title",style:E({marginBottom:2===f(ee)?"40px":0})},[q(s,{size:28,style:{color:"var(--d-999-l-222)"},onClick:re},{default:R((()=>[q(f(z))])),_:1}),M(y(f(N)),1)],4)):p("",!0),2===f(ee)?(u(),d("h3",X,y(e.$t("startResetTitle2"))+"("+y(f(j)(f(le).email))+")",1)):p("",!0),q(n,{ref_key:"formRef",ref:ae,model:f(le),rules:f(te),"label-width":"0",autocomplete:"off",size:"large",style:E({marginTop:1===f(ee)?"40px":"10px"}),onSubmit:a[4]||(a[4]=I((()=>{}),["prevent"]))},{default:R((()=>[1===f(ee)?(u(),v(t,{key:0,label:"",prop:"email"},{default:R((()=>[q(l,{modelValue:f(le).email,"onUpdate:modelValue":a[0]||(a[0]=e=>f(le).email=e),autocomplete:"new-email"+Math.random(),placeholder:e.$t("startEmail"),name:"emailField"},null,8,["modelValue","autocomplete","placeholder"])])),_:1})):2===f(ee)?(u(),d(U,{key:1},[q(t,{label:"",prop:"verificationCode"},{default:R((()=>[q(l,{modelValue:f(le).verificationCode,"onUpdate:modelValue":a[1]||(a[1]=e=>f(le).verificationCode=e),autocomplete:"new-verificationCode"+Math.random(),placeholder:e.$t("startVerificationCode"),name:"new-verificationCode"},{suffix:R((()=>[q(r,{class:"countdownBtn bg-transparent!",link:"",type:"primary",disabled:f(Z),loading:f(K),onClick:de},{default:R((()=>[M(y(f(h)?`${f(w)}${e.$t("SS")}`:e.$t("startCountDown")),1)])),_:1},8,["disabled","loading"])])),_:1},8,["modelValue","autocomplete","placeholder"])])),_:1}),q(t,{label:"",prop:"password"},{default:R((()=>[q(l,{modelValue:f(le).password,"onUpdate:modelValue":a[2]||(a[2]=e=>f(le).password=e),type:"password",name:"password_field",autocomplete:"new-password"+Math.random(),placeholder:e.$t("startPassword"),"show-password":""},null,8,["modelValue","autocomplete","placeholder"])])),_:1}),q(t,{label:"",prop:"confirmPassword"},{default:R((()=>[q(l,{modelValue:f(le).confirmPassword,"onUpdate:modelValue":a[3]||(a[3]=e=>f(le).confirmPassword=e),type:"password",name:"confirm_password_field",placeholder:e.$t("startConfirmPassword"),autocomplete:"new-password2"+Math.random(),"show-password":""},null,8,["modelValue","placeholder","autocomplete"])])),_:1})],64)):(u(),v(i,{key:2,title:e.$t("startSuccessTitle")},{icon:R((()=>a[5]||(a[5]=[c("img",{src:"data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='30'%20cy='30'%20r='30'%20fill='%2327AD75'%20fill-opacity='0.12'/%3e%3cpath%20d='M18.75%2030L26.25%2037.5L41.25%2022.5'%20stroke='%2327AD75'%20stroke-width='2.5'/%3e%3c/svg%3e",width:"80px"},null,-1)]))),_:1},8,["title"])),q(t,{class:g(["mb-0px!"])},{default:R((()=>[q(r,{type:"primary",class:"h-48px!",size:"large",loading:f(J),style:{width:"100%"},onClick:ie},{default:R((()=>[M(y(f(O)),1)])),_:1},8,["loading"])])),_:1}),2===f(ee)?(u(),d("p",Y,"*Â "+y(e.$t("startResetTip")),1)):p("",!0)])),_:1},8,["model","rules","style"])],2)}}}),[["__scopeId","data-v-fcb15076"]]);export{ee as default};
