import{_ as t,c as e,o as i,bQ as s,F as h,D as n,J as o,a4 as a,G as l,f as r,I as m,n as d,ay as u,m as c,br as g,K as p,i as f,w as b,a as v}from"./CcL3nfnm.js";function x(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}function y(t,e,i,s=1){const[h,n]="number"==typeof s?[s,s]:s;return[Math.round(e/h/t[0])*t[0],Math.round(i/n/t[1])*t[1]]}function w(t,e,i){return t-e-i}function z(t,e,i){return t-e-i}function R(t,e,i){return null!==e&&t<e?e:null!==i&&i<t?i:t}function S(t,e,i){let s=t;const h=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find((t=>x(s[t])));if(!x(s[h]))return!1;do{if(s[h](e))return!0;if(s===i)return!1;s=s.parentNode}while(s);return!1}function H(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function M(t,e,i){t&&(t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!0):t["on"+e]=i)}function B(t,e,i){var s;t&&(t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener?null==(s=t.removeEventListener)||s.call(t,e,i,!0):t["on"+e]=null)}const T={start:"mousedown",move:"mousemove",stop:"mouseup"},D={start:"touchstart",move:"touchmove",stop:"touchend"},W={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},k={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let E=T;const L={replace:!0,name:"VueDraggableResizable",props:{shouldRenderChild:{type:Boolean,default:!0},className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>"number"==typeof t?t>0:"auto"===t},h:{type:[Number,String],default:200,validator:t=>"number"==typeof t?t>0:"auto"===t},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>"string"==typeof t?"auto"===t:t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter((t=>e.has(t)))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:t=>"number"==typeof t?t>0:2===t.length&&t[0]>0&&t[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?W:k}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return"auto"!==this.w||this.widthTouched?this.width+"px":"auto"},computedHeight(){return"auto"!==this.h||this.heightTouched?this.height+"px":"auto"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return Boolean(this.handle)&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return Boolean(this.handle)&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return Boolean(this.handle)&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||"auto"===t)&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.checkParentSize(),this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){this.aspectFactor=t?this.width/this.height:void 0},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.checkParentSize(),this.bounds=this.calcResizeLimits()),this.changeHeight(t))},shouldRenderChild(){const[t,e]=H(this.$el);this.left=this.x,this.top=this.y,this.aspectFactor=("auto"!==this.w?this.w:t)/("auto"!==this.h?this.h:e),this.width="auto"!==this.w?this.w:t,this.height="auto"!==this.h?this.h:e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},created:function(){this.maxWidth&&(this.minWidth,this.maxWidth),this.maxHeight&&(this.minHeight,this.maxHeight),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[i,s]=H(this.$el);this.aspectFactor=("auto"!==this.w?this.w:i)/("auto"!==this.h?this.h:s),this.width="auto"!==this.w?this.w:i,this.height="auto"!==this.h?this.h:s,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),M(document.documentElement,"mousedown",this.deselect),M(document.documentElement,"touchend touchcancel",this.deselect),M(window,"resize",this.checkParentSize)},beforeUnmount:function(){B(document.documentElement,"mousedown",this.deselect),B(document.documentElement,"touchstart",this.handleUp),B(document.documentElement,"mousemove",this.move),B(document.documentElement,"touchmove",this.move),B(document.documentElement,"mouseup",this.handleUp),B(document.documentElement,"touchend touchcancel",this.deselect),B(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(t){E=D,this.elementDown(t)},elementMouseDown(t){E=T,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&0!==t.button)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(!1===this.onDragStart(t))return;if(this.dragHandle&&!S(e,this.dragHandle,this.$el)||this.dragCancel&&S(e,this.dragCancel,this.$el))return void(this.dragging=!1);this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),M(document.documentElement,E.move,this.move),M(document.documentElement,E.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const e=t.target||t.srcElement,i=new RegExp(this.className+"-([trmbl]{2})","");this.$el.contains(e)||i.test(e.className)||(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),B(document.documentElement,E.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,e){E=D,this.handleDown(t,e)},handleDown(t,e){e instanceof MouseEvent&&1!==e.which||!1!==this.onResizeStart(t,e)&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizeEnable=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),M(document.documentElement,E.move,this.handleResize),M(document.documentElement,E.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,e=this.minH,i=this.maxW,s=this.maxH;const h=this.aspectFactor,[n,o]=this.grid,a=this.width,l=this.height,r=this.left,m=this.top,d=this.right,u=this.bottom;this.lockAspectRatio&&(t/e>h?e=t/h:t=h*e,i&&s?(i=Math.min(i,h*s),s=Math.min(s,i/h)):i?s=i/h:s&&(i=h*s)),i-=i%n,s-=s%o;const c={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(c.minLeft=r%n,c.maxLeft=r+Math.floor((a-t)/n)*n,c.minTop=m%o,c.maxTop=m+Math.floor((l-e)/o)*o,c.minRight=d%n,c.maxRight=d+Math.floor((a-t)/n)*n,c.minBottom=u%o,c.maxBottom=u+Math.floor((l-e)/o)*o,i&&(c.minLeft=Math.max(c.minLeft,this.parentWidth-d-i),c.minRight=Math.max(c.minRight,this.parentWidth-r-i)),s&&(c.minTop=Math.max(c.minTop,this.parentHeight-u-s),c.minBottom=Math.max(c.minBottom,this.parentHeight-m-s)),this.lockAspectRatio&&(c.minLeft=Math.max(c.minLeft,r-m*h),c.minTop=Math.max(c.minTop,m-r/h),c.minRight=Math.max(c.minRight,d-u*h),c.minBottom=Math.max(c.minBottom,u-d/h))):(c.minLeft=null,c.maxLeft=r+Math.floor((a-t)/n)*n,c.minTop=null,c.maxTop=m+Math.floor((l-e)/o)*o,c.minRight=null,c.maxRight=d+Math.floor((a-t)/n)*n,c.minBottom=null,c.maxBottom=u+Math.floor((l-e)/o)*o,i&&(c.minLeft=-(d+i),c.minRight=-(r+i)),s&&(c.minTop=-(u+s),c.minBottom=-(m+s)),this.lockAspectRatio&&i&&s&&(c.minLeft=Math.min(c.minLeft,-(d+i)),c.minTop=Math.min(c.minTop,-(s+u)),c.minRight=Math.min(c.minRight,-r-i),c.minBottom=Math.min(c.minBottom,-m-s))),c},move(t){this.resizing?this.handleResize(t):this.dragEnable&&this.handleDrag(t)},handleDrag(t){const e=this.axis,i=this.grid,s=this.bounds,h=this.mouseClickPosition,n=e&&"y"!==e?h.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,o=e&&"x"!==e?h.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[a,l]=y(i,n,o,this.scale),r=R(h.left-a,s.minLeft,s.maxLeft),m=R(h.top-l,s.minTop,s.maxTop);if(!1===this.onDrag(r,m))return;const d=R(h.right+a,s.minRight,s.maxRight),u=R(h.bottom+l,s.minBottom,s.maxBottom);this.left=r,this.top=m,this.right=d,this.bottom=u,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(t){const[e,i]=y(this.grid,t,this.top,1),s=R(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=s,this.right=this.parentWidth-this.width-s},moveVertically(t){const[e,i]=y(this.grid,this.left,t,1),s=R(i,this.bounds.minTop,this.bounds.maxTop);this.top=s,this.bottom=this.parentHeight-this.height-s},handleResize(t){let e=this.left,i=this.top,s=this.right,h=this.bottom;const n=this.mouseClickPosition,o=this.aspectFactor,a=n.mouseX-(t.touches?t.touches[0].pageX:t.pageX),l=n.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&a&&(this.widthTouched=!0),!this.heightTouched&&l&&(this.heightTouched=!0);const[r,m]=y(this.grid,a,l,this.scale);this.handle.includes("b")?(h=R(n.bottom+m,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(s=this.right-(this.bottom-h)*o)):this.handle.includes("t")&&(i=R(n.top-m,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-i)*o)),this.handle.includes("r")?(s=R(n.right+r,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(h=this.bottom-(this.right-s)/o)):this.handle.includes("l")&&(e=R(n.left-r,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(i=this.top-(this.left-e)/o));const d=w(this.parentWidth,e,s),u=z(this.parentHeight,i,h);!1!==this.onResize(this.handle,e,i,d,u)&&(this.left=e,this.top=i,this.right=s,this.bottom=h,this.width=d,this.height=u,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(t){const[e,i]=y(this.grid,t,0,1),s=R(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight);let h=this.bottom;this.lockAspectRatio&&(h=this.bottom-(this.right-s)/this.aspectFactor);const n=w(this.parentWidth,this.left,s),o=z(this.parentHeight,this.top,h);this.right=s,this.bottom=h,this.width=n,this.height=o},changeHeight(t){const[e,i]=y(this.grid,0,t,1),s=R(this.parentHeight-i-this.top,this.bounds.minBottom,this.bounds.maxBottom);let h=this.right;this.lockAspectRatio&&(h=this.right-(this.bottom-s)*this.aspectFactor);const n=w(this.parentWidth,this.left,h),o=z(this.parentHeight,this.top,s);this.right=h,this.bottom=s,this.width=n,this.height=o},handleUp(t){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),B(document.documentElement,E.move,this.handleResize)}}},N=["onMousedown","onTouchstart"];const P=t(L,[["render",function(t,r,m,d,u,c){return i(),e("div",{style:a(c.style),class:l([{[m.classNameActive]:t.enabled,[m.classNameDragging]:t.dragging,[m.classNameResizing]:t.resizing,[m.classNameDraggable]:m.draggable,[m.classNameResizable]:m.resizable},m.className]),onMousedown:r[0]||(r[0]=(...t)=>c.elementMouseDown&&c.elementMouseDown(...t)),onTouchstart:r[1]||(r[1]=(...t)=>c.elementTouchDown&&c.elementTouchDown(...t))},[(i(!0),e(h,null,n(c.actualHandles,(h=>(i(),e("div",{key:h,class:l([m.classNameHandle,m.classNameHandle+"-"+h]),style:a({display:t.enabled?"block":"none"}),onMousedown:o((t=>c.handleDown(h,t)),["stop","prevent"]),onTouchstart:o((t=>c.handleTouchDown(h,t)),["stop","prevent"])},[s(t.$slots,h)],46,N)))),128)),s(t.$slots,"default")],38)}]]),C=r({__name:"draggable",props:{initialWidth:{},initialHeight:{},minWidth:{},minHeight:{},maxWidth:{},maxHeight:{},parent:{type:Boolean},handles:{},shouldRenderChild:{type:Boolean,default:!0},z:{}},emits:["onDragStop","onResizing","onDrag"],setup(t,{emit:o}){const a=o,l=m(null);d((()=>{setTimeout((()=>{l.value=document.getElementById("tv_chart_container")}),20)}));const r=u();function x(t,e){a("onDragStop",t,e),l.value&&(l.value.style.pointerEvents="auto")}c((()=>r.path),(()=>{r.path.includes("/token/")&&setTimeout((()=>{l.value=document.getElementById("tv_chart_container")}),20)}));const y=g(((...t)=>{l.value&&(l.value.style.pointerEvents="none"),a("onResizing",t[2],t[3])}),100,!0,!0);function w(){l.value&&(l.value.style.pointerEvents="auto")}function z(t,e){a("onDrag",t,e)}return(t,o)=>(i(),p(P,{"class-name-dragging":"opacity-90 z-10!",shouldRenderChild:t.shouldRenderChild,w:t.initialWidth,h:t.initialHeight,"min-width":t.minWidth,"min-height":t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,parent:t.parent,handles:t.handles,z:t.z,onDragStop:x,onDragging:z,onResizing:f(y),onResizeStop:w},{mr:b((()=>[(i(),e(h,null,n(3,(t=>v("span",{key:t,class:"bg-[--icon-color] w-2px h-2px rounded-full"}))),64))])),default:b((()=>[s(t.$slots,"default")])),_:3},8,["shouldRenderChild","w","h","min-width","min-height","maxWidth","maxHeight","parent","handles","z","onResizing"]))}});export{C as _};
