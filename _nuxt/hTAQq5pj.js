import{n as e,gp as a,av as l,D as r,F as t,ay as i,a8 as s,M as o,fm as n,c,o as d,b as p,a as m,w as u,J as f,t as g,E as b,d as y,a9 as v,K as x,S as h,ac as P,aq as w,T,H as _,ax as k,qt as N,n$ as I,aR as S}from"./BA32e25q.js";import{E as D,a as L}from"./BtweFsGM.js";import"./DibjRb3r.js";import"./CJpU0XlD.js";import"./C9Xc27XT.js";const E=["infinite-scroll-disabled"],Y={class:"text-12px"},O={key:1},R={class:"text-14px"},j={key:0,class:"color-[--down-color]"},M={key:1,class:"color-[--up-color]"},H={key:0,class:"color-[--up-color]"},z={key:1},C={key:2,class:"color-[--down-color]"},U={key:3},$={class:"flex items-center justify-end gap-4px"},A={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},F={key:0},q=e({__name:"conditionOrder",props:{searchParams:{}},setup(e){const q=a(),{t:B}=l(),G=e,J=i(),K=t({loading:!1,finished:!1,error:!1}),Q=t(""),X={LAST_PRICE:B("latestPrice"),INDEX_PRICE:B("indexPrice")},Z=b(()=>{var e,a,l;const r=(null==(l=null==(a=null==(e=q.metadata)?void 0:e.contractList)?void 0:a.reduce)?void 0:l.call(a,(e,a)=>(e[a.contractId]=a.contractName,e),{}))||{};return r.ALL=B("all"),r}),V=async()=>{if(K.value.loading||K.value.finished)return;const e={filterStatusList:"UNTRIGGERED",...G.searchParams};Q.value&&(e.offsetData=Q.value);try{K.value.loading=!0;const a=await N(e);let l=(e=>{var a;return(null==(a=null==e?void 0:e.map)?void 0:a.call(e,e=>{const a="SELL"===e.side,l=e.type.includes("PROFIT");let r="";return r=a?l?"≥":"≤":l?"≤":"≥",{...e,triggerSign:r}}))||[]})(a.dataList);Q.value&&(l=J.value.concat(l)),a.nextPageOffsetData||(K.value.finished=!0),Q.value=a.nextPageOffsetData,J.value=l}catch(a){K.value.error=!0}finally{K.value.loading=!1}};V();return r(()=>G.searchParams,()=>{Q.value="",J.value=[],K.value.finished=!1,K.value.error=!1,K.value.loading=!1,V()}),(e,a)=>{const l=k,r=D,t=P,i=T,b=L,N=s("copy"),q=n;return o((d(),c("div",{class:"relative min-h-400px bg-[--secondary-bg]","infinite-scroll-delay":200,"infinite-scroll-disabled":f(K).loading||f(K).finished||f(K).error,"infinite-scroll-immediate":!1,"infinite-scroll-distance":300},[p(b,{fit:"",data:f(J),"header-row-class-name":"text-12px sticky top-0 z-10 font-500","cell-class-name":"color-[--main-text] text-12px"},{empty:u(()=>{var a;return[f(K).loading||0!==(null==(a=f(J))?void 0:a.length)?(d(),c("span",O)):(d(),_(l,{key:0,class:"pt-[40px]"},{default:u(()=>[m("span",Y,g(e.$t("emptyNoData")),1)]),_:1}))]}),default:u(()=>[p(r,{label:f(B)("markets1"),prop:"contractId"},{default:u(({row:e})=>[m("span",R,g(f(Z)[e.contractId]),1)]),_:1},8,["label"]),p(r,{width:100,label:f(B)("Qty"),prop:"size"},{default:u(({row:a})=>[y(g(("formatNumber"in e?e.formatNumber:f(v))(a.size,10))+" "+g(f(Z)[a.contractId].replace("USD","")),1)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(B)("price"),prop:"price"},{default:u(({row:a})=>[y(g(a.type.includes("LIMIT")?("formatNumber"in e?e.formatNumber:f(v))(a.price,{decimals:10,limit:20}):f(B)("market")),1)]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("triggerPrice"),prop:"triggerPrice"},{default:u(({row:a})=>[y(g(a.triggerSign)+g(("formatNumber"in e?e.formatNumber:f(v))(a.triggerPrice,{limit:20,decimals:10}))+" "+g(X[a.triggerPriceType]),1)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(B)("tradeType"),prop:"tradeType"},{default:u(({row:e})=>[m("span",{class:x("BUY"===e.side?"color-[--up-color]":"color-[--down-color]")},g("BUY"===e.side?f(B)("buy"):f(B)("sell")),3)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(B)("orderType"),prop:"orderType"},{default:u(({row:a})=>[a.type.includes("STOP")?(d(),c("span",j,g(e.$t("stopLoss")),1)):a.type.includes("PROFIT")?(d(),c("span",M,g(e.$t("takeProfit")),1)):h("",!0)]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("takeProfitStopLoss"),prop:"takeProfitStopLoss"},{default:u(({row:l})=>[l.openTp.triggerPrice?(d(),c("span",H,g(("formatNumber"in e?e.formatNumber:f(v))(l.openTp.triggerPrice,{limit:20,decimals:10})),1)):(d(),c("span",z,"--")),a[0]||(a[0]=m("span",{class:"color-[--icon-color] mx-4px"},"/",-1)),l.openSl.triggerPrice?(d(),c("span",C,g(("formatNumber"in e?e.formatNumber:f(v))(l.openSl.triggerPrice,{limit:20,decimals:10})),1)):(d(),c("span",U,"--"))]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("orderId"),prop:"id"},{default:u(({row:e})=>[m("div",$,[y(g(e.id.slice(0,4))+"..."+g(e.id.slice(-4))+" ",1),o(p(t,{name:"bxs:copy",class:"color-[#5A5E64]"},null,512),[[N,e.id]])])]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("orderTime"),prop:"createdTime"},{default:u(({row:e})=>[y(g(f(w)(Number(e.createdTime)).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),p(r,{align:"right",label:f(B)("validityPeriod"),prop:"l2ExpireTime"},{default:u(({row:e})=>[y(g(f(w)(Number(e.l2ExpireTime)).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),p(r,{"min-width":60,align:"right",label:f(B)("operation"),prop:"operate"},{default:u(({row:e})=>[p(i,{size:"small",style:{"--el-button-active-border-color":"transparent"},onClick:a=>(async e=>{await I([e]),V(),S.success(B("cancelledOrderSuccessfully"))})(e.id)},{default:u(()=>[y(g(f(B)("cancel")),1)]),_:1},8,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),m("div",A,[f(K).loading&&f(Q)?(d(),c("span",F,g(f(B)("loading")),1)):h("",!0)])],8,E)),[[q,V]])}}});export{q as default};
