import{dC as t,f as e,v as s,y as i,ah as r,r as o,g as n,m as a,n as l,c as h,o as p,a as c,B as u,a4 as d,bQ as f,t as g,_ as y}from"./CcL3nfnm.js";import{v}from"./_R2nDvl_.js";var x,m={exports:{}};const b=t((x||(x=1,window,m.exports=function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__rest||function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(s[i[r]]=t[i[r]])}return s},o=this&&this.__spreadArrays||function(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<s;e++)for(var o=arguments[e],n=0,a=o.length;n<a;n++,r++)i[r]=o[n];return i};Object.defineProperty(e,"__esModule",{value:!0});var n=s(1),a=Math.PI,l=function(){function t(t){var e=this,s=t.size,r=t.el,o=t.textStyle,a=void 0===o?{}:o,l=t.arcStart,h=void 0===l?144:l,p=t.arcEnd,c=void 0===p?396:p,u=t.progress,d=t.text,f=t.thickness,g=t.fillThickness,y=void 0===g?0:g,v=t.emptyColor,x=t.fillColor,m=t.lineCap,b=t.animation,C=t.speed,k=void 0===C?0:C,S=t.customText,P=t.animationEnd,O=void 0===P?function(){}:P,w=t.onError,z=void 0===w?function(){}:w,T=t.observer;this.percentage=0,this.speed=1,this.speedOption=0,this.type="increase",this.isEnd=!1,this.emptyColor="#efefef",this.fillColor="#6bd5c8",this.lineCap="round",this.increaseValue=0,this.frequency=0,this.lastNumber=0,this.prevProgress=0,this.prevText="0",this.textValue=0,this.drawProgressAnimate=function(){!1===e.animation&&(e.percentage=e.progress),e.isEnd=e.percentage===e.progress,e.ctx.clearRect(0,0,e.size,e.size),e.drawBackground(),e.drawText(),e.drawProgress(),e.isEnd||("increase"===e.type||"decrease"===e.type)&&(e.accumulation(),e.requestAnimationFrame(e.drawProgressAnimate))},this.resetOptions=function(t){var s=t.progress,r=t.thickness,o=t.textStyle,n=t.size,a=t.speed;if("number"==typeof s){var l=100*s;e.type=l>e.progress?"increase":"decrease",e.progress=l,e.optionProgress=s}r&&(e.thickness=2*r),o&&(e.textStyle=i(i({},e.textStyle),o)),n&&(e.size=2*n),"number"==typeof a&&(e.speedOption=a)},this.size=2*(s||200),this.arcStart=h,this.arcEnd=c,this.optionProgress=u,this.progress=100*u,this.text=d,this.el=r,this.thickness=2*(f||12),this.fillThickness=2*y||this.thickness,this.animationEnd=O,this.onError=z,this.emptyColor=v,this.fillColor=x||this.fillColor,this.lineCap=m||this.lineCap,this.animation=b,this.textStyle=i({size:"18px",color:"#000",x:this.size/4,y:this.size/4},a),this.customText=S||[],this.observer=T,this.speedOption=k;var j="object"===n.type(this.fillColor)&&!!this.fillColor.image;this.init({updateImg:j})}return Object.defineProperty(t.prototype,"isEmptyProgressBig",{get:function(){return this.thickness>=this.fillThickness},enumerable:!0,configurable:!0}),t.prototype.init=function(t){var e=this,s=t||{},i=s.notCreate,r=s.updateImg;this.createCanvas(i),this.setSpeed(),this.text&&this.setIncreaseValue(),this.sourceLoad(r).then((function(){return e.drawProgressAnimate()})).catch((function(t){return e.onError(t)}))},t.prototype.createCanvas=function(t){var e="string"==typeof this.el?document.querySelector(this.el):this.el;t||(this.canvas=document.createElement("canvas"));var s=this.size/2;e.style.width=s+"px",e.style.height=s+"px",this.canvas.width=this.size,this.canvas.height=this.size,this.canvas.style.width=s+"px",this.canvas.style.height=s+"px",this.canvas.style.width="block",t||(e.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"))},t.prototype.drawBackground=function(){var t=this.ctx,e=this.size/2,s=this.arcStart/180*a,i=this.arcEnd/180*a;t.beginPath(),t.lineWidth=this.thickness,t.lineCap=this.lineCap,t.strokeStyle=this.emptyColor;var r=this.isEmptyProgressBig?e-this.thickness:e-this.thickness-(this.fillThickness-this.thickness);t.arc(e,e,r,s,i,!1),t.stroke(),t.closePath()},t.prototype.computedArc=function(){var t=this.arcStart/180,e=(this.arcEnd/180-t)*(this.percentage/100)+t;return{start:t*a,end:e*a}},t.prototype.setSpeed=function(){var t=this.speedOption,e=this.animation,s=this.progress,i=this.prevProgress,r=s>i?s-i:i-s;e&&"number"==typeof e?this.speed=r/(e/(1e3/60)):"number"==typeof t&&(this.speed=1,this.speed+=t>0?t/40:t/101),this.frequency=r/this.speed},t.prototype.setIncreaseValue=function(){var t=Number(this.text),e=Number(this.prevText),s=(t>e?t-e:e-t)/this.frequency;!n.isInt(this.text)||s%2&&s%5||(s=s-1>0?s-=1:1),this.increaseValue=s},t.prototype.computedText=function(){var t=this.lastNumber,e=n.isInt(this.text);if("increase"===this.type?this.textValue+=this.increaseValue:this.textValue-=this.increaseValue,this.isEnd)return this.text;if(!e){var s=this.text.split(".")[1].length;return this.lastNumber=9===t?0:t+1,s>1?this.textValue.toFixed(s-1)+this.lastNumber:this.textValue.toFixed(0)+"."+this.lastNumber}return String(Math.floor(this.textValue))},t.prototype.sourceLoad=function(t){var e=this;return new Promise((function(s,i){if("object"===n.type(e.fillColor)&&t){e.drawBackground();var r=e.fillColor.image,o=new Image;o.src=r,o.onload=function(){e.fillImage=o,s(!0)},o.onerror=function(t){i(t)}}else s(!1)}))},t.prototype.setFillColor=function(t){var e=n.type(this.fillColor);if("string"===e)t.strokeStyle=this.fillColor;else if("object"===e&&this.fillColor.image){var s=t.createPattern(this.fillImage,"no-repeat");t.strokeStyle=s}else{for(var i=this.fillColor.gradient,r=t.createLinearGradient(0,0,this.size,0),o=i.length,a=1/o,l=0,h=0;h<o;h++)r.addColorStop(l,i[h]),l+=a;t.strokeStyle=r}},t.prototype.drawProgress=function(){var t=this.ctx,e=this.size/2,s=this.computedArc(),i=s.start,r=s.end;t.beginPath(),t.lineWidth=this.fillThickness,t.lineCap=this.lineCap,this.setFillColor(t);var o=this.isEmptyProgressBig?e-this.fillThickness-(this.thickness-this.fillThickness):e-this.fillThickness;t.arc(e,e,o,i,r,!1),t.stroke(),t.closePath(),this.observer&&this.observer(this.percentage,this.currentText),this.isEnd&&this.animationEnd({progress:this.optionProgress,text:this.text})},t.prototype.setText=function(t,e){var s=e.text,i=e.size,r=void 0===i?"14px":i,o=e.color,n=void 0===o?"#000":o,a=e.x,l=void 0===a?10:a,h=e.y,p=void 0===h?10:h,c=e.font,u=void 0===c?"sans-seri":c,d=2*parseInt(r,10),f=r.substring(String(d).length)||"px";t.font=""+d+f+" "+u,t.fillStyle=n,t.textAlign="center",t.textBaseline="middle",t.fillText(s,2*l,2*p)},t.prototype.drawText=function(){var t=this.ctx,e=this.text&&this.computedText();this.currentText=e;var s=[];e&&s.push(i({text:e},this.textStyle)),s=o(s,this.customText);for(var r=0;r<s.length;r++)this.setText(t,s[r])},t.prototype.requestAnimationFrame=function(t){return window.requestAnimationFrame(t)},t.prototype.accumulation=function(){"increase"===this.type?(this.percentage+=this.speed,this.percentage>this.progress&&(this.percentage=this.progress)):(this.percentage-=this.speed,this.percentage<this.progress&&(this.percentage=this.progress))},t.prototype.updateProgress=function(t){var e=this;this.prevProgress=this.progress,this.prevText=this.text;var s=t.progress,i=t.thickness,o=t.textStyle,a=t.size,l=t.speed,h=r(t,["progress","thickness","textStyle","size","speed"]);if(this.isEnd&&this.prevProgress!==100*s){this.resetOptions({progress:s,thickness:i,textStyle:o,size:a,speed:l}),Object.keys(h||{}).forEach((function(t){return e[t]=h[t]}));var p="object"===n.type(h.fillColor)&&!h.fillColor.image;this.init({updateImg:p,notCreate:!0})}},t.prototype.destroy=function(){var t=this.canvas.parentNode;t&&t.removeChild(this.canvas)},t}();e.default=l},function(t,e,s){Object.defineProperty(e,"__esModule",{value:!0}),e.isInt=function(t){return void 0===t&&(t=""),1===t.split(".").length},e.type=function(t){return Object.prototype.toString.call(t).match(/[A-Z]\w+/)[0].toLowerCase()}}])),m.exports)),C=y(e({__name:"arcProgress",props:{progress:{type:Number,default:0},width:{type:Number,default:260},thickness:{type:Number,default:20},big:{type:Boolean,default:!0},height:{type:Number,default:60},textHeight:{type:Number,default:30},end:{type:Boolean,default:!1},fontSize:{type:String,default:"12px"},colorList:{type:Array,default:()=>["#ccc","#81c54e","#f8be46","#FF354C"]}},setup(t){const e=t,{t:y}=s(),x=i(),{isDark:m}=r(x),C="progress-container-"+v(),k=o(null),S=n((()=>Math.round(e.width/2))),P=t=>0===t?e.colorList[0]:t>0&&t<.4?e.colorList[1]:t>=.4&&t<.6?e.colorList[2]:e.colorList[3],O=n((()=>e.progress<.4?[e.colorList[1],y("seemsNoProblem")]:e.progress<.6?[e.colorList[2],y("possibleRisks")]:[e.colorList[3],y("highRisk")]));return a((()=>e.progress),(t=>{k.value&&k.value.updateProgress({progress:t,text:`${Math.round(100*t)}`,textStyle:e.big?{size:"40px",color:P(t),x:S.value,y:90,font:"Outfit-Medium"}:{size:e.fontSize||"12px",color:P(t),x:S.value,y:e.textHeight,font:"Outfit-Medium"},fillColor:P(t),emptyColor:e.colorList[0]})})),l((()=>{(()=>{const t=Math.round(100*e.progress);k.value=new b({el:`#${C}`,progress:e.progress,speed:5,value:t,animation:!1,text:`${t}`,textStyle:e.big?{size:"40px",color:P(e.progress),x:S.value,y:90,font:"Outfit-Medium"}:{size:e.fontSize||"12px",color:P(e.progress),x:S.value,y:e.textHeight,font:"Outfit-Medium"},arcStart:180,arcEnd:360,size:e.width,thickness:e.thickness,emptyColor:e.colorList[0],fillColor:P(e.progress),customText:e.big?[{text:y("riskAssessment"),size:"14px",color:"#aaa",x:S.value,y:120}]:[{text:y("riskAssessment"),size:"12px",color:m.value?"#566275":"#A9B0BC",x:S.value,y:70}],lineCap:"round"})})()})),(e,s)=>(p(),h("div",null,[c("div",{class:"progress-container",style:d({height:t.big?"140px !important":`${t.height}px !important`,"justify-content":t.end?"flex-end":"center"})},[c("div",{id:C})],4),t.progress>0&&t.big?(p(),h("div",{key:0,class:"checking-tips",style:d({color:O.value[0]})},[c("span",null,g(O.value[1]),1),f(e.$slots,"default",{},void 0,!0)],4)):u("",!0)]))}}),[["__scopeId","data-v-3895f697"]]);export{C as _};
