import{dL as e,er as a,c2 as t,dN as l,dM as i,dO as n,dP as o,dQ as r,eB as s,eE as u,cq as d,r as m,g as v,m as c,eM as p,cs as g,p as f,ey as b,c6 as h,f as V,c8 as w,j as y,h as x,c as S,o as k,b as B,w as M,a as C,G as E,i as L,t as P,a6 as D,a4 as N,dK as z,k as T,dT as F,I,d$ as Y,dY as X,n as _,en as K,dV as U,dU as j,de as W,K as $,B as R,F as O,D as A,J as q,ce as G}from"./CcL3nfnm.js";import{E as J}from"./G9qHT2yq.js";const Q=Symbol("sliderContextKey"),H=t({modelValue:{type:r([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:u,inputSize:u,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:r(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:r(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:s,default:"top"},marks:{type:r(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...o(["ariaLabel"])}),Z=t=>e(t)||a(t)&&t.every(e),ee={[n]:Z,[i]:Z,[l]:Z},ae=t({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:s,default:"top"}}),te={[n]:a=>e(a)},le=(e,a,t)=>{const{disabled:l,min:i,max:o,step:r,showTooltip:s,persistent:u,precision:h,sliderSize:V,formatTooltip:w,emitChange:y,resetSize:x,updateDragging:S}=d(Q),{tooltip:k,tooltipVisible:B,formatValue:M,displayTooltip:C,hideTooltip:E}=((e,a,t)=>{const l=m(),i=m(!1),n=v((()=>a.value instanceof Function)),o=v((()=>n.value&&a.value(e.modelValue)||e.modelValue)),r=g((()=>{t.value&&(i.value=!0)}),50),s=g((()=>{t.value&&(i.value=!1)}),50);return{tooltip:l,tooltipVisible:i,formatValue:o,displayTooltip:r,hideTooltip:s}})(e,w,s),L=m(),P=v((()=>(e.modelValue-i.value)/(o.value-i.value)*100+"%")),D=v((()=>e.vertical?{bottom:P.value}:{left:P.value})),N=e=>{l.value||(e.preventDefault(),F(e),window.addEventListener("mousemove",I),window.addEventListener("touchmove",I),window.addEventListener("mouseup",Y),window.addEventListener("touchend",Y),window.addEventListener("contextmenu",Y),L.value.focus())},z=e=>{l.value||(a.newPosition=Number.parseFloat(P.value)+e/(o.value-i.value)*100,X(a.newPosition),y())},T=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},F=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:i}=T(t);e.vertical?a.startY=i:a.startX=l,a.startPosition=Number.parseFloat(P.value),a.newPosition=a.startPosition},I=t=>{if(a.dragging){let l;a.isClick=!1,C(),x();const{clientX:i,clientY:n}=T(t);e.vertical?(a.currentY=n,l=(a.startY-a.currentY)/V.value*100):(a.currentX=i,l=(a.currentX-a.startX)/V.value*100),a.newPosition=a.startPosition+l,X(a.newPosition)}},Y=()=>{a.dragging&&(setTimeout((()=>{a.dragging=!1,a.hovering||E(),a.isClick||X(a.newPosition),y()}),0),window.removeEventListener("mousemove",I),window.removeEventListener("touchmove",I),window.removeEventListener("mouseup",Y),window.removeEventListener("touchend",Y),window.removeEventListener("contextmenu",Y))},X=async l=>{if(null===l||Number.isNaN(+l))return;l<0?l=0:l>100&&(l=100);const s=100/((o.value-i.value)/r.value);let u=Math.round(l/s)*s*(o.value-i.value)*.01+i.value;u=Number.parseFloat(u.toFixed(h.value)),u!==e.modelValue&&t(n,u),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await f(),a.dragging&&C(),k.value.updatePopper()};return c((()=>a.dragging),(e=>{S(e)})),p(L,"touchstart",N,{passive:!1}),{disabled:l,button:L,tooltip:k,tooltipVisible:B,showTooltip:s,persistent:u,wrapperStyle:D,formatValue:M,handleMouseEnter:()=>{a.hovering=!0,C()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||E()},onButtonDown:N,onKeyDown:e=>{let a=!0;switch(e.code){case b.left:case b.down:z(-r.value);break;case b.right:case b.up:z(r.value);break;case b.home:l.value||(X(0),y());break;case b.end:l.value||(X(100),y());break;case b.pageDown:z(4*-r.value);break;case b.pageUp:z(4*r.value);break;default:a=!1}a&&e.preventDefault()},setPosition:X}},ie=V({name:"ElSliderButton"});var ne=h(V({...ie,props:ae,emits:te,setup(e,{expose:a,emit:t}){const l=e,i=w("slider"),n=y({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),o=v((()=>!!d.value&&m.value)),{disabled:r,button:s,tooltip:u,showTooltip:d,persistent:m,tooltipVisible:c,wrapperStyle:p,formatValue:g,handleMouseEnter:f,handleMouseLeave:b,onButtonDown:h,onKeyDown:V,setPosition:z}=le(l,n,t),{hovering:T,dragging:F}=x(n);return a({onButtonDown:h,onKeyDown:V,setPosition:z,hovering:T,dragging:F}),(e,a)=>(k(),S("div",{ref_key:"button",ref:s,class:E([L(i).e("button-wrapper"),{hover:L(T),dragging:L(F)}]),style:N(L(p)),tabindex:L(r)?-1:0,onMouseenter:L(f),onMouseleave:L(b),onMousedown:L(h),onFocus:L(f),onBlur:L(b),onKeydown:L(V)},[B(L(D),{ref_key:"tooltip",ref:u,visible:L(c),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!L(d),persistent:L(o)},{content:M((()=>[C("span",null,P(L(g)),1)])),default:M((()=>[C("div",{class:E([L(i).e("button"),{hover:L(T),dragging:L(F)}])},null,2)])),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}}),[["__file","button.vue"]]);var oe=V({name:"ElSliderMarker",props:t({mark:{type:r([String,Object]),default:void 0}}),setup(e){const a=w("slider"),t=v((()=>z(e.mark)?e.mark:e.mark.label)),l=v((()=>z(e.mark)?void 0:e.mark.style));return()=>T("div",{class:a.e("marks-text"),style:l.value},t.value)}});const re=(e,a,t)=>{const{form:o,formItem:r}=F(),s=I(),u=m(),d=m(),c={firstButton:u,secondButton:d},p=v((()=>e.disabled||(null==o?void 0:o.disabled)||!1)),g=v((()=>Math.min(a.firstValue,a.secondValue))),b=v((()=>Math.max(a.firstValue,a.secondValue))),h=v((()=>e.range?100*(b.value-g.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%")),V=v((()=>e.range?100*(g.value-e.min)/(e.max-e.min)+"%":"0%")),w=v((()=>e.vertical?{height:e.height}:{})),y=v((()=>e.vertical?{height:h.value,bottom:V.value}:{width:h.value,left:V.value})),x=()=>{if(s.value){const t=s.value.getBoundingClientRect();a.sliderSize=t[e.vertical?"height":"width"]}},S=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return u;let i;return i=Math.abs(g.value-l)<Math.abs(b.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",c[i]})(t);return l.value.setPosition(t),l},k=e=>{t(n,e),t(i,e)},B=async()=>{await f(),t(l,e.range?[g.value,b.value]:e.modelValue)},M=t=>{var l,i,n,o,r,u;if(p.value||a.dragging)return;x();let d=0;if(e.vertical){const e=null!=(n=null==(i=null==(l=t.touches)?void 0:l.item(0))?void 0:i.clientY)?n:t.clientY;d=(s.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{d=((null!=(u=null==(r=null==(o=t.touches)?void 0:o.item(0))?void 0:r.clientX)?u:t.clientX)-s.value.getBoundingClientRect().left)/a.sliderSize*100}return d<0||d>100?void 0:S(d)};return{elFormItem:r,slider:s,firstButton:u,secondButton:d,sliderDisabled:p,minValue:g,maxValue:b,runwayStyle:w,barStyle:y,resetSize:x,setPosition:S,emitChange:B,onSliderWrapperPrevent:e=>{var a,t;((null==(a=c.firstButton.value)?void 0:a.dragging)||(null==(t=c.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{M(e)&&B()},onSliderDown:async e=>{const a=M(e);a&&(await f(),a.value.onButtonDown(e))},onSliderMarkerDown:e=>{if(p.value||a.dragging)return;S(e)&&B()},setFirstValue:t=>{a.firstValue=null!=t?t:e.min,k(e.range?[g.value,b.value]:null!=t?t:e.min)},setSecondValue:t=>{a.secondValue=t,e.range&&k([g.value,b.value])}}},se=V({name:"ElSlider"});const ue=G(h(V({...se,props:H,emits:ee,setup(t,{expose:l,emit:o}){const r=t,s=w("slider"),{t:u}=K(),d=y({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:g,slider:b,firstButton:h,secondButton:V,sliderDisabled:M,minValue:P,maxValue:D,runwayStyle:z,barStyle:T,resetSize:F,emitChange:I,onSliderWrapperPrevent:G,onSliderClick:H,onSliderDown:Z,onSliderMarkerDown:ee,setFirstValue:ae,setSecondValue:te}=re(r,d,o),{stops:le,getStopStyle:ie}=((e,a,t,l)=>({stops:v((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const i=(e.max-e.min)/e.step,n=100*e.step/(e.max-e.min),o=Array.from({length:i-1}).map(((e,a)=>(a+1)*n));return e.range?o.filter((a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min))):o.filter((t=>t>100*(a.firstValue-e.min)/(e.max-e.min)))})),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(r,d,P,D),{inputId:se,isLabeledByFormItem:ue}=U(r,{formItemContext:g}),de=j(),me=v((()=>r.inputSize||de.value)),ve=v((()=>r.ariaLabel||u("el.slider.defaultLabel",{min:r.min,max:r.max}))),ce=v((()=>r.range?r.rangeStartLabel||u("el.slider.defaultRangeStartLabel"):ve.value)),pe=v((()=>r.formatValueText?r.formatValueText(ye.value):`${ye.value}`)),ge=v((()=>r.rangeEndLabel||u("el.slider.defaultRangeEndLabel"))),fe=v((()=>r.formatValueText?r.formatValueText(xe.value):`${xe.value}`)),be=v((()=>[s.b(),s.m(de.value),s.is("vertical",r.vertical),{[s.m("with-input")]:r.showInput}])),he=(e=>v((()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort(((e,a)=>e-a)).filter((a=>a<=e.max&&a>=e.min)).map((a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]}))):[])))(r);((t,l,o,r,s,u)=>{const d=e=>{s(n,e),s(i,e)},m=()=>t.range?![o.value,r.value].every(((e,a)=>e===l.oldValue[a])):t.modelValue!==l.oldValue,v=()=>{var i,n;t.min>t.max&&Y("Slider","min should not be greater than max.");const o=t.modelValue;t.range&&a(o)?o[1]<t.min?d([t.min,t.min]):o[0]>t.max?d([t.max,t.max]):o[0]<t.min?d([t.min,o[1]]):o[1]>t.max?d([o[0],t.max]):(l.firstValue=o[0],l.secondValue=o[1],m()&&(t.validateEvent&&(null==(i=null==u?void 0:u.validate)||i.call(u,"change").catch((e=>X()))),l.oldValue=o.slice())):t.range||!e(o)||Number.isNaN(o)||(o<t.min?d(t.min):o>t.max?d(t.max):(l.firstValue=o,m()&&(t.validateEvent&&(null==(n=null==u?void 0:u.validate)||n.call(u,"change").catch((e=>X()))),l.oldValue=o)))};v(),c((()=>l.dragging),(e=>{e||v()})),c((()=>t.modelValue),((e,t)=>{l.dragging||a(e)&&a(t)&&e.every(((e,a)=>e===t[a]))&&l.firstValue===e[0]&&l.secondValue===e[1]||v()}),{deep:!0}),c((()=>[t.min,t.max]),(()=>{v()}))})(r,d,P,D,o,g);const Ve=v((()=>{const e=[r.min,r.max,r.step].map((e=>{const a=`${e}`.split(".")[1];return a?a.length:0}));return Math.max.apply(null,e)})),{sliderWrapper:we}=((t,l,i)=>{const n=m();return _((async()=>{t.range?(a(t.modelValue)?(l.firstValue=Math.max(t.min,t.modelValue[0]),l.secondValue=Math.min(t.max,t.modelValue[1])):(l.firstValue=t.min,l.secondValue=t.max),l.oldValue=[l.firstValue,l.secondValue]):(!e(t.modelValue)||Number.isNaN(t.modelValue)?l.firstValue=t.min:l.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),l.oldValue=l.firstValue),p(window,"resize",i),await f(),i()})),{sliderWrapper:n}})(r,d,F),{firstValue:ye,secondValue:xe,sliderSize:Se}=x(d);return p(we,"touchstart",G,{passive:!1}),p(we,"touchmove",G,{passive:!1}),W(Q,{...x(r),sliderSize:Se,disabled:M,precision:Ve,emitChange:I,resetSize:F,updateDragging:e=>{d.dragging=e}}),l({onSliderClick:H}),(e,a)=>{var t,l;return k(),S("div",{id:e.range?L(se):void 0,ref_key:"sliderWrapper",ref:we,class:E(L(be)),role:e.range?"group":void 0,"aria-label":e.range&&!L(ue)?L(ve):void 0,"aria-labelledby":e.range&&L(ue)?null==(t=L(g))?void 0:t.labelId:void 0},[C("div",{ref_key:"slider",ref:b,class:E([L(s).e("runway"),{"show-input":e.showInput&&!e.range},L(s).is("disabled",L(M))]),style:N(L(z)),onMousedown:L(Z),onTouchstartPassive:L(Z)},[C("div",{class:E(L(s).e("bar")),style:N(L(T))},null,6),B(ne,{id:e.range?void 0:L(se),ref_key:"firstButton",ref:h,"model-value":L(ye),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!L(ue)?L(ce):void 0,"aria-labelledby":!e.range&&L(ue)?null==(l=L(g))?void 0:l.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?L(xe):e.max,"aria-valuenow":L(ye),"aria-valuetext":L(pe),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":L(M),"onUpdate:modelValue":L(ae)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(k(),$(ne,{key:0,ref_key:"secondButton",ref:V,"model-value":L(xe),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":L(ge),"aria-valuemin":L(ye),"aria-valuemax":e.max,"aria-valuenow":L(xe),"aria-valuetext":L(fe),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":L(M),"onUpdate:modelValue":L(te)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):R("v-if",!0),e.showStops?(k(),S("div",{key:1},[(k(!0),S(O,null,A(L(le),((e,a)=>(k(),S("div",{key:a,class:E(L(s).e("stop")),style:N(L(ie)(e))},null,6)))),128))])):R("v-if",!0),L(he).length>0?(k(),S(O,{key:2},[C("div",null,[(k(!0),S(O,null,A(L(he),((e,a)=>(k(),S("div",{key:a,style:N(L(ie)(e.position)),class:E([L(s).e("stop"),L(s).e("marks-stop")])},null,6)))),128))]),C("div",{class:E(L(s).e("marks"))},[(k(!0),S(O,null,A(L(he),((e,a)=>(k(),$(L(oe),{key:a,mark:e.mark,style:N(L(ie)(e.position)),onMousedown:q((a=>L(ee)(e.position)),["stop"])},null,8,["mark","style","onMousedown"])))),128))],2)],64)):R("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),e.showInput&&!e.range?(k(),$(L(J),{key:0,ref:"input","model-value":L(ye),class:E(L(s).e("input")),step:e.step,disabled:L(M),controls:e.showInputControls,min:e.min,max:e.max,precision:L(Ve),debounce:e.debounce,size:L(me),"onUpdate:modelValue":L(ae),onChange:L(I)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):R("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}}),[["__file","slider.vue"]]));export{ue as E};
