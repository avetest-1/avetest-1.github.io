import{f as e,v as t,P as n,g as a,c as l,o,a as i,b as s,J as r,i as u,t as c,C as m,w as d,F as v,D as p,K as f,s as k,_,B as b,$ as g,cv as h,a4 as y,H as x,d as w,bx as T,nN as S,E as $,b3 as N,bn as I,R as M,or as P,nP as A,bM as F,os as C,ot as L,ou as H,ov as E,ow as R,ox as U,oy as j,oz as O,oA as D,o4 as B,o3 as z,bf as V,oB as K,oC as W,oD as G,oE as q,oF as J,a0 as Q,oG as Y,oH as Z,n1 as X,oI as ee,oJ as te,oK as ne,oL as ae,oM as le,oN as oe,oO as ie,oP as se,oQ as re,oR as ue,O as ce,M as me,z as de,r as ve,aH as pe,fj as fe,a8 as ke,oS as _e,a3 as be,aM as ge,aN as he,aZ as ye,a2 as xe,fe as we,bN as Te,fb as Se,aI as $e,aJ as Ne,m as Ie,n as Me,cy as Pe,U as Ae,N as Fe,f7 as Ce,f9 as Le,Q as He,oT as Ee,bg as Re,G as Ue,nU as je,cx as Oe,cz as De,bR as Be,o5 as ze,oU as Ve,oV as Ke,oW as We,oX as Ge}from"./CcL3nfnm.js";import{u as qe,S as Je,P as Qe,a as Ye}from"./kaPXM-zE.js";import{E as Ze,a as Xe}from"./DyutjMGI.js";import"./K_hMfFH7.js";import{_ as et}from"./Cto5UsVA.js";import{E as tt}from"./Dewn7Ah1.js";import{a as nt}from"./CLl1N47J.js";import"./BcNpNqRH.js";import"./AOqVyNLt.js";import"./axq-m3p1.js";import"./G9qHT2yq.js";import"./Dnhqk2HV.js";import"./DLlTDLKN.js";import"./CxxI1n-f.js";import"./CfesD0_m.js";import"./CijV6juy.js";const at={class:"relative"},lt=_(e({__name:"solanaLimitExpired",props:{expiredTime:{type:[Number,null],default:null}},emits:["update:visible","update:expiredTime"],setup(e,{emit:_}){const{t:b}=t(),g=e,h=_,y=n("selectRef"),x=a((()=>[{name:b("never"),value:""},{name:b("10min"),value:600},{name:b("1h"),value:3600},{name:b("1d"),value:86400},{name:b("3d"),value:259200},{name:b("7d"),value:604800}].map((e=>e.value===g.expiredTime?{...e,color:"#286DFF "}:e)))),w=a((()=>{var e;return null==(e=x.value.find((e=>e.value===(null===g.expiredTime?"":g.expiredTime))))?void 0:e.name})),T=a({get:()=>null===g.expiredTime?"":g.expiredTime,set(e){h("update:expiredTime",""===e?null:e)}});return(e,t)=>{const n=m,a=Ze,_=Xe;return o(),l("div",at,[i("div",{class:"select-container clickable",onClick:t[0]||(t[0]=r((e=>{var t,n;return null==(n=null==(t=u(y))?void 0:t.focus)?void 0:n.call(t)}),["stop"]))},[i("span",null,c(u(w)),1),s(n,{class:"clickable text-12px color-#999 ml-5px",name:"solar:alt-arrow-down-bold"})]),s(_,{ref_key:"selectRef",ref:y,modelValue:u(T),"onUpdate:modelValue":t[1]||(t[1]=e=>k(T)?T.value=e:null),placeholder:"Select",size:"small",style:{width:"80px",opacity:"0",position:"absolute",right:"0",top:"50%",transform:"translateY(-50%)"}},{default:d((()=>[(o(!0),l(v,null,p(u(x),(e=>(o(),f(a,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-775d3efa"]]),ot={key:0},it={key:1},st={key:1},rt={key:2},ut={class:"swap-info"},ct={key:0,class:"swap-info_item"},mt={class:"swap-info_item-label"},dt=["innerHTML"],vt={class:"swap-info_item"},pt={class:"swap-info_item-label"},ft={class:"swap-info_item-value"},kt=["src"],_t=["innerHTML"],bt={class:"ml-5px"},gt={class:"swap-info_item"},ht={class:"swap-info_item-label"},yt={class:"swap-info_item-value"},xt=["innerHTML"],wt={style:{color:"var(--custom-primary-color)"}},Tt={class:"swap-info_item"},St={class:"swap-info_item-label"},$t={class:"swap-info_item-value"},Nt=["src"],It=["innerHTML"],Mt={class:"ml-5px"},Pt={class:"swap-info_item"},At={class:"swap-info_item-label"},Ft={class:"swap-info_item-value"},Ct=["src"],Lt=["innerHTML"],Ht={class:"ml-5"},Et={class:"swap-info_item"},Rt={class:"swap-info_item-label"},Ut={class:"swap-info_item-value"},jt=["innerHTML"],Ot={style:{color:"var(--custom-primary-color)"}},Dt={class:"swap-info_item"},Bt={class:"swap-info_item-label"},zt={class:"swap-info_item-value"},Vt=["src"],Kt=["innerHTML"],Wt={class:"ml-5"},Gt={key:3,class:"swap-info_item"},qt={class:"swap-info_item-label"},Jt=["innerHTML"],Qt={class:"swap-info_item tips warning"},Yt={class:"swap-info_item tips warning"},Zt={key:0,class:"swap-info_item tips warning"},Xt={key:1,class:"swap-info_item tips warning"},en={key:1,class:"swap-info center"},tn={class:"mt-20"},nn={class:"swap-info center"},an={class:"mt-20px"},ln={class:"footer"},on=_(e({__name:"confirmLimit",props:{visible:{type:Boolean,default:!1},limitInfo:{type:Object,default:()=>{}},loading:{type:Boolean,default:!1},chain:{type:String,default:""},limitGasU:{type:String,default:""},activeShow:{type:Number,default:0}},emits:["update:visible","submit"],setup(e,{emit:t}){const n=e,p=t,_=a({get:()=>n.visible,set(e){p("update:visible",e)}});function M(e){var t;return e.logoURI&&!(null==(t=null==e?void 0:e.logoURI)?void 0:t.includes("empty-token"))?e.logoURI:N({symbol:null==e?void 0:e.symbol,chain:null==e?void 0:e.chain,logo_url:null==e?void 0:e.logo_url})}function P(){window.open(I(n.chain,n.limitInfo.transaction,"tx"))}return(t,n)=>{const a=x,N=T,I=m,A=$;return o(),f(A,{modelValue:u(_),"onUpdate:modelValue":n[1]||(n[1]=e=>k(_)?_.value=e:null),width:"446px"},{header:d((()=>[1===e.activeShow?(o(),l(v,{key:0},[0===e.limitInfo.orderType?(o(),l("span",ot,c(0===e.limitInfo.activeTab?t.$t("limitBuy"):t.$t("limitSell")),1)):b("",!0),1===e.limitInfo.orderType?(o(),l("span",it,c(0===e.limitInfo.activeTab?t.$t("stopLimitBuy"):t.$t("stopLimitSell")),1)):b("",!0)],64)):2===e.activeShow?(o(),l("span",st,c(t.$t("waitForConfirming")),1)):3===e.activeShow?(o(),l("span",rt,c(t.$t("tradeConfirmed")),1)):b("",!0)])),default:d((()=>{var m,f,k,_,x,T,$,A,F,C,L,H,E,R,U,j,O,D,B,z,V,K,W;return[1==e.activeShow?(o(),l(v,{key:0},[i("ul",ut,[1===e.limitInfo.orderType?(o(),l("li",ct,[i("div",mt,c(t.$t("limitEffective")),1),i("div",{class:"swap-info_item-value",innerHTML:t.$t("triggerPriceEffective",{symbol:1===e.limitInfo.activeTab?(null==(f=null==(m=e.limitInfo)?void 0:m.fromToken)?void 0:f.symbol)||"":(null==(_=null==(k=e.limitInfo)?void 0:k.toToken)?void 0:_.symbol)||"",price:("formatNumber"in t?t.formatNumber:u(g))((null==(x=e.limitInfo)?void 0:x.triggerPrice)||0)})},null,8,dt)])):b("",!0),0===e.limitInfo.activeTab?(o(),l(v,{key:1},[i("li",vt,[i("div",pt,c(t.$t("limitBuy")),1),i("div",ft,[i("img",{class:"icon-token",src:M(e.limitInfo.toToken),alt:"",height:"20"},null,8,kt),i("span",{innerHTML:("formatNumber"in t?t.formatNumber:u(g))(e.limitInfo.toAmount||0)},null,8,_t),i("span",bt,c((null==($=null==(T=e.limitInfo)?void 0:T.toToken)?void 0:$.symbol)||""),1)])]),i("li",gt,[i("div",ht,c(t.$t("limitPrice"))+"("+c(1===e.limitInfo.activeTab?(null==(F=null==(A=e.limitInfo)?void 0:A.fromToken)?void 0:F.symbol)||"":(null==(L=null==(C=e.limitInfo)?void 0:C.toToken)?void 0:L.symbol)||"")+")",1),i("div",yt,[i("span",{innerHTML:`$${("formatNumber"in t?t.formatNumber:u(g))(e.limitInfo.targetLimitPrice||0)}`},null,8,xt),i("span",wt,"("+c(t.$t("auto-submitWhenPriceBuy"))+")",1)])]),i("li",Tt,[i("div",St,c(t.$t("expectedPayment")),1),i("div",$t,[i("img",{class:"icon-token",src:M(e.limitInfo.fromToken),alt:"",height:"20"},null,8,Nt),i("span",{innerHTML:("formatNumber"in t?t.formatNumber:u(g))(e.limitInfo.fromAmount||0)},null,8,It),i("span",Mt,c((null==(E=null==(H=e.limitInfo)?void 0:H.fromToken)?void 0:E.symbol)||""),1)])])],64)):b("",!0),1===e.limitInfo.activeTab?(o(),l(v,{key:2},[i("li",Pt,[i("div",At,c(t.$t("limitSell")),1),i("div",Ft,[i("img",{class:"icon-token",src:M(e.limitInfo.fromToken),alt:"",height:"20"},null,8,Ct),i("span",{innerHTML:("formatNumber"in t?t.formatNumber:u(g))(e.limitInfo.fromAmount||0)},null,8,Lt),i("span",Ht,c((null==(U=null==(R=e.limitInfo)?void 0:R.fromToken)?void 0:U.symbol)||""),1)])]),i("li",Et,[i("div",Rt,c(t.$t("limitPrice"))+"("+c(1===e.limitInfo.activeTab?(null==(O=null==(j=e.limitInfo)?void 0:j.fromToken)?void 0:O.symbol)||"":(null==(B=null==(D=e.limitInfo)?void 0:D.toToken)?void 0:B.symbol)||"")+")",1),i("div",Ut,[i("span",{innerHTML:`$${("formatNumber"in t?t.formatNumber:u(g))(e.limitInfo.targetLimitPrice||0)}`},null,8,jt),i("span",Ot,"("+c(t.$t("auto-submitWhenPriceSell"))+")",1)])]),i("li",Dt,[i("div",Bt,c(t.$t("expectedReceivable")),1),i("div",zt,[i("img",{class:"icon-token",src:M(e.limitInfo.toToken),alt:"",height:"20"},null,8,Vt),i("span",{innerHTML:("formatNumber"in t?t.formatNumber:u(g))(e.limitInfo.toAmount||0)},null,8,Kt),i("span",Wt,c((null==(V=null==(z=e.limitInfo)?void 0:z.toToken)?void 0:V.symbol)||""),1)])])],64)):b("",!0),"solana"!==e.chain?(o(),l("li",Gt,[i("div",qt,c(t.$t("estimateGas")),1),i("div",{class:"swap-info_item-value",style:{"text-align":"right"},innerHTML:t.$t("estimateGasTips",{n:("formatNumber"in t?t.formatNumber:u(g))(e.limitGasU??1,1)})},null,8,Jt)])):b("",!0),"solana"!==e.chain?(o(),l(v,{key:4},[i("li",Qt,"* "+c(t.$t("limitFeeTip")),1),i("li",Yt,"* "+c(t.$t("limitTokenTips")),1),(null==(W=null==(K=e.limitInfo)?void 0:K.fromToken)?void 0:W.address)===u(h)?(o(),l("li",Zt,c(t.$t("limitTips1")),1)):(o(),l("li",Xt,c(t.$t("limitTips2")),1))],64)):b("",!0)]),i("div",{class:"footer",style:y({"padding-bottom":"solana"!==e.chain?"10px":"0"})},[s(a,{class:"swap-button w-full",type:"primary",size:"large",loading:e.loading,"loading-text":t.$t("confirming"),block:"",onClick:n[0]||(n[0]=r((e=>p("submit")),["stop"]))},{default:d((()=>[w(c(t.$t("confirm")),1)])),_:1},8,["loading","loading-text"])],4)],64)):2==e.activeShow?(o(),l("div",en,[s(N,{size:110,color:"#747782",style:{animation:"rotating 2s linear infinite normal"}},{default:d((()=>[s(u(S))])),_:1}),i("span",tn,c(t.$t("plsConfirmWallet")),1)])):3==e.activeShow?(o(),l(v,{key:2},[i("div",nn,[s(I,{name:"lineicons:arrow-up-circle",class:"text-110px"}),i("span",an,c(t.$t("plsViewBlockChainExplorer")),1)]),i("div",ln,[s(a,{class:"swap-button w-full",type:"primary",size:"large",block:"",onClick:r(P,["stop"])},{default:d((()=>[w(c(t.$t("viewTransition")),1)])),_:1})])],64)):b("",!0)]})),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-2d2e0786"]]);async function sn(e){const{from_token:t,to_token:n,amountIn:a,amountOut:l}=e,o=await function(e){let t="Lifinity V1,Lifinity V2,Phoenix,Openbook,OpenBook V2";sessionStorage.isMoonshot||sessionStorage.isMeteora||(t+=",Meteora,Meteora DLMM");const n={...e,restrictIntermediateTokens:!0,excludeDexes:t};n.inputMint===h&&(n.inputMint="So11111111111111111111111111111111111111112");n.outputMint===h&&(n.outputMint="So11111111111111111111111111111111111111112");return G({method:"get",url:"https://api.jup.ag/swap/v1/quote",params:n},"v3")}({inputMint:t,outputMint:n,amount:a||l||"",slippageBps:200,swapMode:a?"ExactIn":"ExactOut"});return{...o,chain:"solana"}}function rn(e,{chain:t,QuoteContract:n,swapContract:a,gasPrice:l,nativePrice:o,amountIn:i,amountOut:s,balance:r,allowanceAmount:u,fromIsETH:c,toIsETH:m,mainName:d,from_token:v,to_token:p}){var f;let k="0";if(!e.pair_path||0===(null==(f=e.pair_path)?void 0:f.length)||!e.token_path||0===e.token_path.length)return Promise.resolve({routerPath:[],routerPairPath:[]});const _=e.pair_path.map((e=>{var n;return(null==(n=q)?void 0:n.includes(t))?{pair:"v4"===e.protocol?"0x".padEnd(42,"0"):e.pair,tokenIn:e.token_in,tokenOut:e.token_out,router:e.amm_router,poolId:"v4"===e.protocol?e.pair:"0x".padEnd(66,"0")}:{pair:e.pair,tokenIn:e.token_in,tokenOut:e.token_out,router:e.amm_router}}));let b=1;"arbitrum"===t?b=3.5:("optimism"===t||"base"===t)&&(b=4);const g=M();return Number(i)?n.getAmountsOut.staticCall(_,i).then((async n=>{var s,f,y,x;let w=e.token_path.map(((e,t)=>({...e,amount:n[t].toString()})));c&&(w[0].isETH=c,w[0].symbol=d),m&&(w[w.length-1].isETH=m,w[w.length-1].symbol=d);let T=0;if(u.gte(i)&&r.gte(i)){const r=g.address,u=String(e.feeIn??"2"),c=30,m=J(g.address);let d={srcToken:v,dstToken:p,srcReceiver:0!==Number(_[0].router)?e.pair_path[0].pair:a.address,dstReceiver:r,amount:i,minReturnAmount:"1",feeIn:u,feeRate:c,feeTo:J(g.address),receiveRate:0,referrer:m,path:_,routerPath:[]};(null==(s=q)?void 0:s.includes(t))&&(d={srcToken:v,dstToken:p,amount:i,minReturnAmount:"1",feeIn:u,feeRate:c,feeTo:J(g.address),minLiquidity:"0",maxLiquidity:"0",referRates:[0],referrers:[m],paths:_});const x=v===h?i:"0",$=null==n?void 0:n[w.length-1];try{const n=new Q(await(null==(f=null==a?void 0:a[Y(t)])?void 0:f.staticCall(d,{value:x})));T=Number(((1e4-n.times(1e4).div($).toNumber()-c)/100).toFixed(2))||0,T>0&&(w[w.length-1].amount=n.toString()),(e.total_sell_tax||0)>0&&(b=2,"arbitrum"===t?b=4:"eth"===t?b=2.3:("optimism"===t||"base"===t)&&(b=4.5));const i=new Q("360000"),s=null==(y=w[w.length-1])?void 0:y.decimals,r=new Q(o.toString()),u=new Q(e.to_price.toString()),m=new Q(l.toString()).times(r).times(i.toString()).times(b).div(u).times(10**(s-18)).toFixed(0);k=new Q(l.toString()).times(r).times(i.toString()).times(b).div(10**18).toFixed(),m&&(w[w.length-1].amount=n.minus(m).toString())}catch(S){}}else{T=new Q(e.total_buy_tax||0).plus(e.total_sell_tax||0)||new Q(0);let t=new Q("360000");(e.total_sell_tax||0)>0?t=t.times(2):T.gt(0)&&(t=t.times(1.5));const a=null==n?void 0:n[w.length-1],i=new Q(e.to_price.toString()),s=null==(x=w[w.length-1])?void 0:x.decimals,r=new Q(o.toString()),u=new Q(l.toString()).times(r).times(t.toString()).div(i).times(10**(s-18)).toFixed(0);let c=new Q(a.toString()).times(new Q(100).minus(T)).div(100);c.gt(u)&&(c=c.minus(u)),k=new Q(l.toString()).times(r).times(t.toString()).times(b).div(10**18).toFixed(),w[w.length-1].amount=c.toFixed(0)}return w=w.map((e=>({...e,address:e.isETH?h:e.address}))),w[0].price=e.from_price,w[w.length-1].price=e.to_price,{routerPath:w,routerPairPath:_,...e,totalTax:Math.max(Number(T.toFixed()),0),isAmountOut:!1,gas:"0".toString(),gasU:k}})):s?n.getAmountsIn.staticCall(_,s).then((async n=>{var i,f;let y=e.token_path.map(((e,t)=>({...e,amount:n[t].toString()})));c&&(y[0].isETH=c,y[0].symbol=d),m&&(y[y.length-1].isETH=m,y[y.length-1].symbol=d);const x=null==n?void 0:n[0];let w=0;if(u.gte(x)&&r.gte(x)){const n=g.address,u=String(e.feeIn??"2"),c=30,m=J(g.address),d=0,f={srcToken:v,dstToken:p,srcReceiver:0!==Number(_[0].router)?e.pair_path[0].pair:a.address,dstReceiver:n,amount:r.toString(),minReturnAmount:s,feeIn:u,feeRate:c,feeTo:m,receiveRate:ie.test(t)?d:0,referrer:m,path:_,routerPath:[]},S=v===h?f.amount:"0";try{const n=new Q(await a.exactOutput.staticCall(f,{value:S}));w=Number(((1e4-x.times(1e4).div(n).toNumber()-c)/100).toFixed(2))||0,w>0&&(y[0].amount=n.toString()),(e.total_sell_tax||0)>0&&(b=2,"arbitrum"===t?b=4:"eth"===t?b=2.3:"optimism"===t?b=4.5:"base"===t&&(b=5));const s=new Q("360000"),r=null==(i=y[0])?void 0:i.decimals,u=new Q(o.toString()),m=new Q(e.from_price.toString()),d=new Q(l.toString()).times(u).times(s.toString()).times(b).div(m).times(10**(r-18)).toFixed(0);k=new Q(l.toString()).times(u).times(s.toString()).times(b).div(10**18).toFixed(),d&&(y[0].amount=n.plus(d).toString())}catch(T){}}else{w=new Q(e.total_buy_tax||0).plus(e.total_sell_tax||0)||new Q(0);let a=new Q("360000");(e.total_sell_tax||0)>0?a=a.times(2):w.gt(0)&&(a=a.times(1.5)),"arbitrum"===t&&(a=a.times(3.5)),"optimism"===t&&(a=a.times(4)),"base"===t&&(a=a.times(4.5));const i=null==n?void 0:n[0],s=null==(f=y[0])?void 0:f.decimals,r=new Q(o.toString()),u=new Q(e.from_price.toString()),c=new Q(l.toString()).times(r).times(a.toString()).div(u).times(10**(s-18)).toFixed(0),m=new Q(i.toString()).div(new Q(100).minus(w)).times(100).plus(c);k=new Q(l.toString()).times(r).times(a.toString()).div(10**18).toFixed(),y[0].amount=m.toFixed(0)}return y=y.map((e=>({...e,address:e.isETH?h:e.address}))),y[0].price=e.from_price,y[y.length-1].price=e.to_price,{routerPath:y,routerPairPath:_,...e,totalTax:Math.max(Number(w.toFixed()),0),isAmountOut:!0,gas:"0".toString(),gasU:k}})):Promise.resolve({routerPath:[],routerPairPath:[]})}async function un(e,t=null){const n=Z.deserialize(X.from(e,"base64")),a=await le(n,t);return{hash:a,wait:()=>oe(a)}}async function cn(e,t=M().address){const{fromToken:n,fromAmount:a,toToken:l,toAmount:o,expiredAt:i}=e,s={maker:t,payer:t,params:{makingAmount:a,takingAmount:o,expiredAt:i?String(i):void 0},inputMint:n,outputMint:l,computeUnitPrice:"auto"};return(r=s,G({method:"POST",url:"https://api.jup.ag/trigger/v1/createOrder",data:r})).then((e=>{const t=e.transaction;return{result:e,send:()=>un(t)}}));var r}function mn({id:e,fromToken:t,fromAmount:n,toToken:a,toAmount:l,maker:o,salt:i,signature:s,minReturn:r,targetToken:u,targetLimitPrice:c,orderType:m,triggerPrice:d,currentPrice:v},p=M().chain){m=m||0,d=d||c,v=v||0;const{$api:f}=V();return f("/v1api/v2/aveswap/limitorder/add",{method:"post",body:{order_id:e,chain:p,from_token:t,from_amount:n,to_token:a,to_amount:l,maker:o,salt:i,signature:s,to_min_amount:r,target_token:u,target_limit_price:c,order_type:m,trigger_price:d,current_price:v}})}async function dn({fromToken:e,fromAmount:t,toToken:n,minReturn:a,salt:l,id:o,order_id:i},s=M().chain){const r=await H(),u=new U(K[s],W,r);return u.cancelOrder.estimateGas(e,t,n,a,l).then((r=>u.cancelOrder(e,t,n,a,l,{gasLimit:r.toString()}).then((e=>e.wait())).then((e=>function(e,t,n=M().chain){const{$api:a}=V();return a("/v1api/v2/aveswap/limitorder/cancel",{method:"post",body:{id:e,chain:n,order_id:t}})}(o,i,s)))))}async function vn(e,t=M().address){return function(e){const{$api:t}=V();return t("https://jup.ag/api/limit/v1/cancelOrders",{method:"post",body:e})}({owner:t,feePayer:t,orders:[e]}).then((e=>async function(e,t=null){const n=Z.deserialize(X.from(e,"base64")),a=ee(),l=await Promise.all(n.message.addressTableLookups.map((async e=>new te({key:e.accountKey,state:te.deserialize(await a.getAccountInfo(e.accountKey).then((e=>e.data)))})))),o=ne.decompile(n.message,{addressLookupTableAccounts:l});o.instructions=await ae(o.instructions),n.message=o.compileToV0Message(l);const i=await le(n,t);return{hash:i,wait:()=>oe(i)}}(e.tx)))}async function pn(e,t=M().address){return(n={maker:t,orders:[e],computeUnitPrice:"auto"},G({method:"post",url:"https://api.jup.ag/trigger/v1/cancelOrders",data:n})).then((e=>un(e.transactions[0])));var n}const fn=["onClick"],kn={class:"flex items-center"},_n={key:0,class:"token-container"},bn={class:"icon-token-container mr-5px"},gn=["src"],hn=["innerHTML"],yn={class:"mr-5px text-12px label"},xn={key:1,class:"token-container"},wn=["innerHTML"],Tn={class:"flex items-center mt-5px"},Sn={key:0,class:"token-container"},$n={class:"icon-token-container mr-5px"},Nn=["src"],In=["innerHTML"],Mn={class:"flex items-center justify-between mt-5px"},Pn={class:"label mr-20px flex items-center"},An={key:0},Fn={class:"flex items-center"},Cn={key:0,class:"token-container"},Ln={class:"icon-token-container mr-5px"},Hn=["src"],En=["innerHTML"],Rn={class:"flex items-center mt-5px"},Un={key:0,class:"token-container"},jn={class:"icon-token-container mr-5px"},On=["src"],Dn=["innerHTML"],Bn={class:"flex justify-between mt-10px"},zn={class:"label mr-20px"},Vn={class:"token-container flex items-end flex-col",style:{"align-items":"end"}},Kn={class:"text-12px",style:{"text-align":"right"}},Wn={class:"color-666 text-12px",style:{"text-align":"right"}},Gn={class:"flex items-center justify-between mt-10px"},qn={class:"mr-20px label"},Jn={key:0,class:"color-#999 text-12px",style:{"text-align":"right"}},Qn={class:"label"},Yn={key:1,class:"color-#999 text-12px"},Zn={class:"label"},Xn={key:0,class:"flex items-center justify-between mt-10px"},ea={class:"mr-20px label"},ta={class:"color-#999 text-12px"},na=_(e({__name:"limitTxItem",props:{tableList:{type:Array,default:()=>[]}},emits:["refresh"],setup(e,{emit:n}){const a=n,m=M(),k=ce(),_=me(),T=de(),S=qe(),{t:$}=t(),P=ve({}),A=ve(!1);function F(e){const t="solana"===(null==e?void 0:e.chain)?$("cancelOrderConfirmingSolana"):$("confirmCancelMessage");ye.confirm(t,$("cancelOrderConfirming"),{confirmButtonText:$("confirm"),cancelButtonText:$("cancel"),beforeClose:(t,n,l)=>{"confirm"===t?(l(),n.confirmButtonLoading=!0,"solana"===e.chain?C(e,(()=>{n.confirmButtonLoading=!1})):function(e){if("solana"===e.chain)return void C(e);const t={fromToken:e.from_token||"",fromAmount:e.from_amount||"0",toToken:e.to_token||"",minReturn:e.to_min_amount||"0",salt:e.salt||"0",id:e.id||"",order_id:e.order_id||""};A.value=!0,dn(t).then((t=>{xe.success($("cancelledOrderSuccessfully")),a("refresh",e)})).catch((e=>{we(e)})).finally((()=>{A.value=!1}))}(e)):l()}}).then((()=>{}))}function C(e,t){P.value[e.orderKey]=!0;return("v1"===(null==e?void 0:e.version)?vn:pn)(e.orderKey).then((e=>(t&&t(),e.wait()))).then((t=>{!function(e){if("solana"!==e.chain&&e.from_token!==h)return;S.getTokenDetails()}(e),setTimeout((()=>{a("refresh",e,P.value)}),3e3)})).catch((t=>{we(t,"solana"),P.value[e.orderKey]=!1})).finally((()=>{}))}function L(e){if((0===e.status||-1===e.status)&&1e3*e.created_at+_e<Date.now())return $("expired1");const t=e.status;return{0:"",1:$("cancelled"),2:$("completed"),3:$("unknownError1"),7:$("unknownError1"),4:$("notEnoughBalance"),5:$("insufficientSlippage1"),8:$("insufficientSlippage1"),6:$("transferFailed"),10:$("fail1"),11:$("fail1"),12:$("fail1"),13:$("fail1"),"-1":""}[t]??t}function H(e){if((0===e.status||-1===e.status)&&1e3*e.created_at+_e<Date.now())return"#999999";const t=e.status;return 1===t||10===t||11===t||12===t?"#999999":2===t?"#12B886":0===t?"#286DFF":"#FF0000"}function E(e){const t=["So11111111111111111111111111111111111111112","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"];return t.indexOf(e.from_token)<=t.indexOf(e.to_token)}function R(e){return E(e)?(null==e?void 0:e.from_token_symbol)||"":(null==e?void 0:e.to_token_symbol)||""}function U(e){return E(e)?g(new Q(e.to_amount).times(10**((null==e?void 0:e.from_token_decimals)-(null==e?void 0:e.to_token_decimals))).times((null==e?void 0:e.to_token_price)||0).div(e.from_amount).toFixed()):g(new Q(e.from_amount).times(10**((null==e?void 0:e.to_token_decimals)-(null==e?void 0:e.from_token_decimals))).times((null==e?void 0:e.from_token_price)||0).div(e.to_amount).toFixed())}function j(e){return E(e)?g(e.to_amount*10**((null==e?void 0:e.from_token_decimals)-(null==e?void 0:e.to_token_decimals))/e.from_amount)+" "+((null==e?void 0:e.to_token_symbol)||"")+" per "+((null==e?void 0:e.from_token_symbol)||""):g(e.from_amount*10**((null==e?void 0:e.to_token_decimals)-(null==e?void 0:e.from_token_decimals))/e.to_amount)+" "+((null==e?void 0:e.from_token_symbol)||"")+" per "+((null==e?void 0:e.to_token_symbol)||"")}function O(e){if("Pending"===(null==e?void 0:e.state)&&null!==(null==e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null==e?void 0:e.expiredAt)||0))return $("expired1");const t=e.state;return{Pending:"",Completed:$("completed"),Cancelled:$("cancelled")}[t]??t}function D(e){if("Pending"===(null==e?void 0:e.state)&&null!==(null==e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null==e?void 0:e.expiredAt)||0))return"#999999";return{Pending:"",Completed:"#12B886",Cancelled:"#999999"}[e.state]??"#286DFF"}return(t,n)=>{var a;const S=pe,$=x,M=et,C=tt;return o(),l("ul",null,[(o(!0),l(v,null,p(e.tableList,((e,a)=>(o(),l("li",{key:a,class:"tx-li-item clickable",onClick:r((t=>function(e){if("solana"===e.chain){if("Sending"===(null==e?void 0:e.state))return;const t=(null==e?void 0:e.closeTx)||(null==e?void 0:e.openTx);if(!t)return;window.open(I("solana",t,"tx"))}else 2===e.status&&window.open(I(e.chain,e.executed_tx_hash,"tx"))}(e)),["stop"])},["solana"!==e.chain?(o(),l(v,{key:0},[i("div",kn,[i("span",{class:"label",style:y({"min-width":"en"===u(k).locale?"30px":"20px"})},c(t.$t("from")),5),e.from_token?(o(),l("div",_n,[i("div",bn,[s(S,{class:"icon-token",src:("getSymbolDefaultIcon"in t?t.getSymbolDefaultIcon:u(N))({logo_url:e.from_token_logo_url,symbol:e.from_token_symbol,chain:e.chain||u(m).chain}),lazy:""},null,8,["src"]),(null==e?void 0:e.chain)?(o(),l("img",{key:0,class:"icon-chain",src:`${u(_).token_logo_url}chain/${null==e?void 0:e.chain}.png`,alt:"",srcset:""},null,8,gn)):b("",!0)]),i("span",{class:"mr-5px",innerHTML:("formatNumber"in t?t.formatNumber:u(g))(("formatUnits"in t?t.formatUnits:u(fe))(e.from_amount,e.from_token_decimals))},null,8,hn),i("span",null,c(e.from_token_symbol||""),1)])):b("",!0),n[0]||(n[0]=i("span",{style:{flex:"1"}},null,-1)),i("span",yn,c(t.$t("price"))+"("+c(e.target_token===e.from_token?(null==e?void 0:e.from_token_symbol)||"":(null==e?void 0:e.to_token_symbol)||"")+") ",1),e.target_token?(o(),l("div",xn,[i("span",{innerHTML:`$${e.target_limit_price?("formatNumber"in t?t.formatNumber:u(g))(e.target_limit_price):"--"}`},null,8,wn)])):b("",!0)]),i("div",Tn,[i("span",{class:"label",style:y({"min-width":"en"===u(k).locale?"30px":"20px"})},c(t.$t("to")),5),e.to_token?(o(),l("div",Sn,[i("div",$n,[s(S,{class:"icon-token",src:("getSymbolDefaultIcon"in t?t.getSymbolDefaultIcon:u(N))({logo_url:e.to_token_logo_url,symbol:e.to_token_symbol,chain:e.chain||u(m).chain}),lazy:""},null,8,["src"]),(null==e?void 0:e.chain)?(o(),l("img",{key:0,class:"icon-chain",src:`${u(_).token_logo_url}chain/${null==e?void 0:e.chain}.png`,alt:"",srcset:""},null,8,Nn)):b("",!0)]),i("span",{class:"mr-5px",innerHTML:("formatNumber"in t?t.formatNumber:u(g))(("formatUnits"in t?t.formatUnits:u(fe))(e.to_amount,e.to_token_decimals))},null,8,In),i("span",null,c((null==e?void 0:e.to_token_symbol)||""),1)])):b("",!0)]),i("div",Mn,[i("div",Pn,[i("span",null,c(("formatDate"in t?t.formatDate:u(ke))(e.created_at)),1),(0===e.status||-1===e.status)&&Date.now()<1e3*e.created_at+u(_e)?(o(),l("span",An," ("+c(t.$t("expiresInTime",{t:u(be)(1e3*e.created_at+u(_e)).fromNow()}))+") ",1)):b("",!0)]),1===e.status||2===e.status?(o(),l("span",{key:0,class:"status-txt",style:y({color:H(e)})},c(L(e)),5)):(o(),l(v,{key:1},[n[1]||(n[1]=i("span",{style:{flex:"1"}},null,-1)),0!==e.status||(0===e.status||-1===e.status)&&1e3*e.created_at+u(_e)<Date.now()?(o(),l("span",{key:0,class:"status-txt",style:y({color:H(e)})},c(L(e)),5)):b("",!0),e.from_token===u(h)||(0===e.status||-1===e.status)&&1e3*e.created_at+u(_e)>Date.now()?(o(),f($,{key:1,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:u(A),"loading-text":t.$t("revoke"),"loading-size":"0.28rem",onClick:r((t=>F(e)),["stop"])},{default:d((()=>[w(c(t.$t("revoke")),1)])),_:2},1032,["loading","loading-text","onClick"])):b("",!0)],64))])],64)):(o(),l(v,{key:1},[i("div",Fn,[i("span",{class:"label",style:y({"min-width":"en"===u(k).locale?"30px":"20px"})},c(t.$t("from")),5),e.from_token?(o(),l("div",Cn,[i("div",Ln,[s(S,{class:"icon-token",src:("getSymbolDefaultIcon"in t?t.getSymbolDefaultIcon:u(N))({logo_url:e.from_token_logo_url,symbol:e.from_token_symbol,chain:e.chain||u(m).chain}),lazy:""},null,8,["src"]),(null==e?void 0:e.chain)?(o(),l("img",{key:0,class:"icon-chain",src:`${u(_).token_logo_url}chain/${null==e?void 0:e.chain}.png`,alt:"",srcset:""},null,8,Hn)):b("",!0)]),i("span",{class:"mr-5px",innerHTML:("formatNumber"in t?t.formatNumber:u(g))(("formatUnits"in t?t.formatUnits:u(fe))(e.from_amount,e.from_token_decimals))},null,8,En),i("span",null,c(e.from_token_symbol||""),1)])):b("",!0),n[2]||(n[2]=i("span",{style:{flex:"1"}},null,-1)),"Sending"===e.state?(o(),f(M,{key:1,class:"text-16px"})):(o(),l(v,{key:2},[i("span",{class:"label",style:y({color:D(e)})},c(O(e)),5),"solana"===e.chain&&"Pending"===e.state?(o(),f($,{key:0,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:u(P)[e.orderKey],"loading-text":t.$t("revoke"),"loading-size":"14px",onClick:r((t=>F(e)),["stop"])},{default:d((()=>[w(c(t.$t("revoke")),1)])),_:2},1032,["loading","loading-text","onClick"])):b("",!0)],64))]),i("div",Rn,[i("span",{class:"label",style:y({"min-width":"en"===u(k).locale?"30px":"20px"})},c(t.$t("to")),5),e.to_token?(o(),l("div",Un,[i("div",jn,[s(S,{class:"icon-token",src:("getSymbolDefaultIcon"in t?t.getSymbolDefaultIcon:u(N))({logo_url:e.to_token_logo_url,symbol:e.to_token_symbol,chain:e.chain||u(m).chain}),lazy:""},null,8,["src"]),(null==e?void 0:e.chain)?(o(),l("img",{key:0,class:"icon-chain",src:`${u(_).token_logo_url}chain/${null==e?void 0:e.chain}.png`,alt:"",srcset:""},null,8,On)):b("",!0)]),i("span",{class:"mr-5px",innerHTML:("formatNumber"in t?t.formatNumber:u(g))(("formatUnits"in t?t.formatUnits:u(fe))(e.to_amount,e.to_token_decimals))},null,8,Dn),i("span",null,c((null==e?void 0:e.to_token_symbol)||""),1)])):b("",!0)]),i("div",Bn,[i("span",zn,c(t.$t("delegatePrice"))+"("+c(R(e))+")",1),i("div",Vn,[i("span",Kn,"$"+c(U(e)),1),i("span",Wn,"("+c(j(e))+")",1)])]),i("div",Gn,[i("span",qn,c(t.$t("amount1")),1),E(e)?(o(),l("div",Jn,[i("span",null,c(("formatNumber"in t?t.formatNumber:u(g))(("formatUnits"in t?t.formatUnits:u(fe))(e.from_amount_used||0,e.from_token_decimals)))+"/"+c(("formatNumber"in t?t.formatNumber:u(g))(("formatUnits"in t?t.formatUnits:u(fe))(e.from_amount||0,e.from_token_decimals)))+" "+c(e.from_token_symbol),1),i("span",Qn,"("+c(("formatNumber"in t?t.formatNumber:u(g))(e.percent||0))+"%)",1)])):(o(),l("div",Yn,[i("span",null,c(("formatNumber"in t?t.formatNumber:u(g))(("formatUnits"in t?t.formatUnits:u(fe))(e.to_amount_used||0,e.to_token_decimals)))+"/"+c(("formatNumber"in t?t.formatNumber:u(g))(("formatUnits"in t?t.formatUnits:u(fe))(e.to_amount||0,e.to_token_decimals)))+" "+c(e.to_token_symbol),1),i("span",Zn,"("+c(("formatNumber"in t?t.formatNumber:u(g))(e.percent||0))+"%)",1)]))]),void 0!==e.expiredAt?(o(),l("div",Xn,[i("span",ea,c(t.$t("expiredTime")),1),i("span",ta,c(e.expiredAt?("formatDate"in t?t.formatDate:u(ke))(e.expiredAt):t.$t("never")),1)])):b("",!0)],64))],8,fn)))),128)),e.tableList&&0!==(null==(a=e.tableList)?void 0:a.length)?b("",!0):(o(),f(C,{key:0,"image-size":100,image:"light"===u(T).theme?u(ge):u(he)},null,8,["image"]))])}}}),[["__scopeId","data-v-d47732f3"]]),aa={class:"card-container mt-10px"},la={class:"flex items-center"},oa=["innerHTML"],ia={class:"flex justify-between items-center mt-10px"},sa={class:"card-container bottom mt-10px"},ra={class:"flex items-center"},ua=["innerHTML"],ca={class:"flex justify-between items-center mt-10px"},ma={key:0,class:"limit-price-label mb-5px"},da={key:1,class:"card-container flex justify-between items-center rd-6px! py-0!"},va=["disabled"],pa=["disabled"],fa={class:"limit-price-label mt-10px mb-5px"},ka={class:"card-container flex justify-between items-center rd-6px! py-0!",style:{"margin-bottom":"10px"}},_a=["disabled"],ba=["disabled"],ga={class:"limit-price-label mt-10px mb-5px"},ha={class:"card-container flex justify-between items-center rd-6px! py-0!",style:{"margin-bottom":"10px"}},ya=["disabled"],xa=["disabled"],wa={class:"swap-label mt-10px"},Ta={key:0,class:"slippage-container"},Sa={key:1},$a={class:"swap-label_item-left"},Na={key:1,style:{display:"flex","align-items":"center"}},Ia={class:"mt-10px"},Ma={class:"tabs-1"},Pa=["onClick"],Aa=_(e({__name:"limit",setup(e){const _=qe(),y=M(),S=n("percentStepInf"),$=a((()=>_.chain)),{t:N}=t(),I=Te("limitSlippage","10"),G=ve(""),q=ve(""),J=ve(!1),Y=ve("0"),Z=ve(""),X=ve(0),ee=ve(!1),te=ve(0),ne=ve(""),ae=ve(""),le=ve(""),oe=ve(!1),ie=ve(!1),ce=ve(!1),me=ve(null),de=ve(!1),pe=ve(!1),ke=ve(0),_e=ve([]),be=ve(!1),ge=ve(!1),he=ve("limit"),Ze=a((()=>[{name:N("historyLimitOrder"),value:"limit"}])),Xe=a((()=>{var e;if(ge.value){const t=_.token1.address;return null==(e=_e.value)?void 0:e.filter((e=>e.target_token===t))}return _e.value})),et=ve({chain:"",orderType:0,triggerPrice:0,fromToken:{address:"",chain:"",balance:0,symbol:"",price:0},toToken:{address:"",chain:"",balance:0,symbol:"",price:0},targetTokenInfo:{address:"",chain:"",balance:0,symbol:"",price:0},fromAmount:"",toAmount:"",targetToken:"",targetLimitPrice:"",activeTab:_.activeTab,minReturn:"0",slippage:I.value||"10"}),tt=a((()=>{if(["solana","ton","sui"].includes(_.chain)||_.fromToken.address===h)return!0;if(!Y.value)return!1;const e=(0===_.activeTab?_.token2:_.token1).decimals||0,t=0===_.activeTab?q.value:G.value;return Se(new Q(t||0).toFixed(e),e).lte(Y.value)})),at=a((()=>y.address&&y.provider?0===_.activeTab?$e[0]:1===_.activeTab?Ne[0]:"#558BED":"#999"));function ot(){var e,t;G.value="",q.value="",null==(t=null==(e=S.value)?void 0:e.handleClick)||t.call(e,0),1===_.activeTab&&st(),_.getToken1Info(),_.getBaseToken(),"solana"===$.value&&rt()}function it(){var e,t;G.value="",q.value="",null==(t=null==(e=S.value)?void 0:e.handleClick)||t.call(e,0),_.getToken2Info(),0===_.activeTab&&st(),"solana"===$.value&&rt()}function st(){const e=0===_.activeTab?_.token2:_.token1;if(y.chain&&y.chain===e.chain&&e.address){const t=e.chain||y.chain;if("solana"===t)return;const n=K[t];J.value=!0,je(e.address,n).then((e=>{Y.value=e.toString()})).finally((()=>{J.value=!1}))}}function rt(){var e,t,n,a,l;if(!(null==(e=_.token1)?void 0:e.address)||!(null==(t=_.token2)?void 0:t.address)||"solana"!==$.value||0!==_.swapType)return;const o={from_token:null==(n=_.token1)?void 0:n.address,to_token:null==(a=_.token2)?void 0:a.address,amountIn:Se("1",null==(l=_.token1)?void 0:l.decimals).toFixed(0)};Z.value="",sn(o).then((e=>{var t;const n=fe((null==e?void 0:e.outAmount)||0,null==(t=_.token2)?void 0:t.decimals);X.value=n,function(){const e=_.token1.chain,t=_.token1.address+"-"+e,n=_.token2.address+"-"+e;return Oe([t,n]).then((async e=>{var t,n;return _.token1.price=(null==(t=null==e?void 0:e[0])?void 0:t.current_price_usd)||0,_.token2.price=(null==(n=null==e?void 0:e[1])?void 0:n.current_price_usd)||0,[_.token1.price,_.token2.price]}))}().then((e=>{})),Z.value=""})).catch((e=>{X.value=0,Z.value="1"}))}function ut(){ne.value&&new Q(ne.value).gt("0")&&(ne.value=Pe(new Q(ne.value).times(.99).toFixed()),ht())}function ct(){ne.value&&new Q(ne.value).gt("0")&&(ne.value=Pe(new Q(ne.value).times(1.01).toFixed()),ht())}function mt(){le.value&&new Q(le.value).gt("0")&&(le.value=Pe(new Q(le.value).times(.99).toFixed()))}function dt(){ne.value&&new Q(le.value).gt("0")&&(le.value=Pe(new Q(le.value).times(1.01).toFixed()))}function vt(){te.value&&new Q(te.value).gt("0")&&(te.value=Pe(new Q(te.value).times(.99).toFixed()),xt())}function pt(){te.value&&new Q(te.value).gt("0")&&(te.value=Pe(new Q(te.value).times(1.01).toFixed()),xt())}function ft(e,t=!1){var n,a;if(t)return;const l=Number(e)/100,o=0===_.activeTab?_.token2:_.token1;let i=o.balance||0;if(l){const e=o.decimals||18;if((null==o?void 0:o.address)===h){const t=o.chain,a=De[t]||.01;i=(null==(n=new Q(i).minus(a).times(l).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`)))?void 0:n[0])||0}else i=(null==(a=new Q(i).times(l).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`)))?void 0:a[0])||0;0===Number(i)&&(i="")}else i="";0===_.activeTab?q.value!==i&&(q.value=Number(i)<0?"0":i,gt()):G.value!==i&&(G.value=Number(i)<0?"0":i,_t())}let kt=null;function _t(){ee.value||(kt&&(clearTimeout(kt),kt=null),kt=setTimeout((()=>{const e=G.value,t=Number(e);""===e||"."===e?(G.value="",q.value=""):0===t&&0!==Number(q.value)?q.value=0:t&&(q.value="",ht())}),500))}let bt=null;function gt(){ee.value||(bt&&(clearTimeout(bt),bt=null),bt=setTimeout((()=>{const e=q.value,t=Number(e);""===e||"."===e?(G.value="",q.value=""):0===t&&0!==Number(G.value)?G.value=0:t&&(G.value="",ht())}),500))}function ht(){"solana"!==_.chain?wt()&&(Number(ne.value)&&(Number(G.value)||Number(q.value))&&_.token1.address!==_.token2.address&&y.provider?(yt&&(clearTimeout(yt),yt=null),yt=setTimeout((()=>{const e=0===_.activeTab?_.token2:_.token1,t=1===_.activeTab?_.token2:_.token1,n=Se((0===_.activeTab?q.value:G.value)||"0",e.decimals).toFixed(0),a=Se((1===_.activeTab?q.value:G.value)||"0",t.decimals).toFixed(0),l={from_token:e.address,to_token:t.address,amountIn:n,amountOut:a};ee.value=!0,async function({from_token:e,to_token:t,amountIn:n,amountOut:a},l,o=M().chain,i=3,s=3){const r=await P(e,A(o),o),u=r.balance,c=r.allowance,m=F(o),d=null==m?void 0:m.wmain_wrapper,v=null==m?void 0:m.main_name,p=null==m?void 0:m.wmain_name;let f=e,k=t,_=!1,b=!1,g=!1,y=!1;return f===d&&(g=!0),k===d&&(y=!0),f===h&&(f=d,_=!0),k===h&&(k=d,b=!0),g&&b||_&&y?Promise.resolve({toWrapper:_&&y?1:2,wrapper:d,amount:"0"!==n&&n?n:a,routerPath:[{address:_?h:d,amount:"0"!==n&&n?n:a,decimals:18,isETH:_,isWrapper:g,symbol:_?v:p},{address:b?h:d,amount:"0"!==a&&a?a:n,decimals:18,isETH:b,isWrapper:y,symbol:b?v:p}]}):C(f,k,o,i,s).then((async l=>{if(0===(null==l?void 0:l.length))return Promise.reject({code:"noMatchingRoute"});const{_provider:i}=L(o),s=await H(),r="tron"===o?E(R,A(o)):new U(A(o),R,s||i),m="tron"===o?E(O,j[o]):new U(j[o],D(o),s||i),d=await B(o),p=await z(o),f={chain:o,QuoteContract:m,swapContract:r,gasPrice:d,nativePrice:p,amountIn:n,amountOut:a,balance:u,allowanceAmount:c,fromIsETH:_,toIsETH:b,mainName:v,from_token:e,to_token:t};return 1===(null==l?void 0:l.length)?rn(l[0],f):2===(null==l?void 0:l.length)?rn(l[0],f).catch((async e=>rn(l[1],f))):(null==l?void 0:l.length)>2?rn(l[0],f).catch((async e=>rn(l[1],f).catch((async e=>rn(l[2],f))))):void 0}))}(l).then((e=>{var t,n,a,l,o,i,s,r;if(1===e.toWrapper||2===e.toWrapper)return void(ee.value=!1);ae.value=e.gasU;const u=null==(n=null==(t=null==e?void 0:e.routerPath)?void 0:t.find)?void 0:n.call(t,(e=>e.address===_.token1.address)),c=null==(l=null==(a=null==e?void 0:e.routerPath)?void 0:a.find)?void 0:l.call(a,(e=>e.address===_.token2.address));_.token1.price=u.price,_.token2.price=c.price,new Q((null==u?void 0:u.amount)||0).lte(0)||new Q((null==c?void 0:c.amount)||0).lte(0)?ye.alert(N("limitOrderAmount"),N("tips"),{confirmButtonText:N("okay")}):ne.value&&G.value&&q.value?0===_.activeTab?G.value=(null==(o=new Q(fe(u.amount,u.decimals)).times(u.price||0).div(ne.value||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${_.token1.decimals}})?`)))?void 0:o[0])||"":q.value=(null==(i=new Q(fe(c.amount,c.decimals)).times(ne.value||0).div(u.price||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${_.token2.decimals}})?`)))?void 0:i[0])||"":ne.value&&G.value?q.value=(null==(s=new Q(fe(c.amount,c.decimals)).times(ne.value||0).div(u.price||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${_.token2.decimals}})?`)))?void 0:s[0])||"":ne.value&&q.value&&(G.value=(null==(r=new Q(fe(u.amount,u.decimals)).times(u.price||0).div(ne.value||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${_.token1.decimals}})?`)))?void 0:r[0])||"")})).catch((e=>{we(e)})).finally((()=>{ee.value=!1}))}),500)):_.token1.address===_.token2.address&&Be({type:"error",message:N("twoIdenticalTokens")})):xt()}let yt=null;function xt(){Number(te.value)&&(Number(G.value)||Number(q.value))&&_.token1.address!==_.token2.address&&y.provider?(yt&&(clearTimeout(yt),yt=null),yt=setTimeout((()=>{var e,t;G.value?q.value=new Q(G.value||0).times(te.value).div((null==(e=_.token2)?void 0:e.price)||1).toFixed(_.token2.decimals):q.value&&(G.value=new Q(q.value).times((null==(t=_.token2)?void 0:t.price)||0).div(te.value).toFixed(_.token1.decimals))}),500)):_.token1.address===_.token2.address&&Be({type:"error",message:N("twoIdenticalTokens")})}function wt(){var e,t,n,a,l;const o=y.chain,i=_.token1.chain,s=_.token2.chain,r=Object.keys(K).concat("solana");return!(i&&!(null==(e=null==r?void 0:r.includes)?void 0:e.call(r,i)))&&(!(s&&!(null==(t=null==r?void 0:r.includes)?void 0:t.call(r,s)))&&(!!o&&(!(null==(a=null==(n=y.address)?void 0:n.startsWith)?void 0:a.call(n,"T"))&&(!(o&&!(null==(l=null==r?void 0:r.includes)?void 0:l.call(r,o)))&&(o===i&&o===s)))))}function Tt(){var e,t,n,a,l,o,i;const s=y.chain,r=Object.keys(K).concat("solana"),u=F(s).name,c=_.token1.chain,m=_.token2.chain;return c&&!(null==(e=null==r?void 0:r.includes)?void 0:e.call(r,c))?N("noSupportChain",{chain:null==(t=F(c))?void 0:t.name}):m&&!(null==(n=null==r?void 0:r.includes)?void 0:n.call(r,m))?N("noSupportChain",{chain:null==(a=F(m))?void 0:a.name}):s?(null==(o=null==(l=y.address)?void 0:l.startsWith)?void 0:o.call(l,"T"))?N("noSupportChain",{chain:"TRON"}):s&&!(null==(i=null==r?void 0:r.includes)?void 0:i.call(r,s))?N("noSupportChain",{chain:u}):s!==c&&c||s!==m&&m?N("chainNotSame1"):c!==m?N("tokenNoSameChain"):"":N("noSupportChain",{chain:u})}function St(){if("solana"===$.value&&Z.value)return!1;const e=(0===_.activeTab?_.token2:_.token1).balance||0,t=0===_.activeTab?q.value:G.value;return!(0===Number(e)||Number(e)<Number(t)||!y.provider||"0"===String(t)||_.token1.address===_.token2.address)}function $t(){if("solana"===$.value&&Z.value)return N("noSToken");const e=(0===_.activeTab?_.token2:_.token1).balance||0,t=0===_.activeTab?q.value:G.value;return y.address?y.address&&!y.provider?N("observeAddressNotSwap"):Number(0===e||Number(e)<Number(t)||!y.provider)?N("insufficientBalance"):"0"===String(t)?N("AmountCannotBeZero"):"":N("pConnectWallet")}function Nt(){try{if(!y.provider)return void(y.provider||ye.alert(N("browserWalletNotDetected"),N("tips"),{confirmButtonText:N("confirm")}));if(!wt())return;const e=y.chain;if(e!==(_.token1.chain||_.token2.chain||e))return void ye.alert(N("plsSwitchChain",{chain:e}),N("tips"));0!==_.swapType&&1!==_.swapType||(tt.value?function(){var e;const t=0===_.activeTab?_.token2:_.token1,n=0===_.activeTab?_.token1:_.token2,a=0===_.activeTab?q.value:G.value,l=0===_.activeTab?G.value:q.value,o=0===_.activeTab?_.token1.decimals:_.token2.decimals;let i=new Q(I.value||0);i=new Q(1).minus(i.div(100));let s=new Q(Ve[t.chain||y.chain]||0).times(5);s=s.gte(3)?s.gte(50)?new Q(50):s:new Q(3);if(!new Q(a).times((null==t?void 0:t.price)||0).gte(s.times(.999)))return void ye.alert(N("minimumTransactionAmount",{n:s.toFixed()}),N("tips"),{confirmButtonText:N("okay")});const r=_.token1.chain||y.chain;et.value={chain:r,orderType:_.swapType,fromToken:t,toToken:n,fromAmount:a,toAmount:l,targetToken:_.token1.address,targetTokenInfo:_.token1,targetLimitPrice:"solana"===r?te.value:ne.value,triggerPrice:le.value,activeTab:_.activeTab,minReturn:(null==(e=new Q(l||0).times(i).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o}})?`)))?void 0:e[0])||"0",slippage:I.value},ke.value=1,"solana"===r?(ie.value=!0,Oe([et.value.targetToken+"-"+r]).then((e=>{var t,n,a,l,o,i,s,r;const u=(null==(t=null==e?void 0:e[0])?void 0:t.current_price_usd)||(null==(a=null==(n=et.value)?void 0:n.targetTokenInfo)?void 0:a.price)||(null==(l=_.baseToken)?void 0:l.token.current_price_usd)||0;0===_.activeTab&&new Q(u).lt((null==(o=et.value)?void 0:o.targetLimitPrice)||"0")?ye.alert(N("limitPriceTips",{p1:g(null==(i=et.value)?void 0:i.targetLimitPrice),p2:g(u)}),N("tips"),{confirmButtonText:N("okay")}):1===_.activeTab&&new Q(u).gt((null==(s=et.value)?void 0:s.targetLimitPrice)||"0")?ye.alert(N("limitPriceTips1",{p1:g(null==(r=et.value)?void 0:r.targetLimitPrice),p2:g(u)}),N("tips"),{confirmButtonText:N("okay")}):(de.value=!0,ie.value=!1)})).catch((()=>{de.value=!0,ie.value=!1})).finally((()=>{ie.value=!1}))):de.value=!0}():async function(){if(!wt())return;ce.value=!0;const e=_.token1.chain||y.chain||"",t=K[e],n=0===_.activeTab?_.token2:_.token1;ze(n.address,t).then((e=>e.wait())).then((e=>{st()})).catch((e=>{we(e)})).finally((()=>{ce.value=!1}))}())}catch(e){}}function It(){var e,t,n,a,l;if(!wt())return;let o=new Q(I.value||0);o=new Q(1).minus(o.div(100));const i=y.address,s=0===_.activeTab?_.token2:_.token1,r=0===_.activeTab?_.token1:_.token2,u=0===_.activeTab?q.value:G.value,c=0===_.activeTab?G.value:q.value,m=s.address,d=Se((null==(e=new Q(u||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${s.decimals}})?`)))?void 0:e[0])||0,s.decimals).toFixed(0),v=r.address,p=Se((null==(t=new Q(c||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${r.decimals}})?`)))?void 0:t[0])||0,r.decimals).toFixed(0),f=Se((null==(n=new Q(c||0).times(o).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${r.decimals}})?`)))?void 0:n[0])||0,r.decimals).toFixed(0),k=_.token1.address,b=ne.value;pe.value=!0;const g=_.swapType;le.value;const x=(null==(l=null==(a=_.baseToken)?void 0:a.token)?void 0:l.current_price_usd)?Pe(_.baseToken.token.current_price_usd):"";if("solana"!==_.chain)(async function(e,t,n,a,l,o,i,s,r,u,c,m=Date.now(),d=M().chain){const v=se(re.defaultAbiCoder().encode(["address","address","uint256","address","uint256","uint256"],[e,t,n,a,l,m])),p=M(),f=await H();if(t===h){const k=new U(K[d],W,f);return k.depositEth.estimateGas(a,l,m,{value:n}).then((f=>k.depositEth(a,l,m,{value:n,gasLimit:f.toString()}).then((e=>e.wait())).then((f=>{const k={id:v,fromToken:t,fromAmount:n,toToken:a,toAmount:o,minReturn:l,targetToken:i,targetLimitPrice:s,salt:m,signature:"",maker:e,orderType:r,triggerPrice:u,currentPrice:c};return nt({chain:d,destination:"wallet rpc",type:20,order_id:"aveswap_"+v,status:1,wallet:p.address,out_token:a,out_amount:o,in_token:t,in_amount:n}),mn(k)}))))}const k=ue(v);return null==f?void 0:f.signMessage(k).then((d=>mn({id:v,fromToken:t,fromAmount:n,toToken:a,toAmount:o,minReturn:l,targetToken:i,targetLimitPrice:s,salt:m,signature:d,maker:e,orderType:r,triggerPrice:u,currentPrice:c})))})(i,m,d,v,f,p,k,b,g,le.value,x).then((()=>{xe.success(N("submitOrdersSuccess")),Mt(),G.value="",q.value="",de.value=!1,s.address===h&&(s.address===_.token1.address?_.getToken1Info():s.address===_.token2.address&&_.getToken2Info())})).catch((e=>{we(e)})).finally((()=>{pe.value=!1}));else{const e=me.value?Number(Math.floor(Date.now()/1e3)+Math.floor(me.value)):null;let t="";cn({fromToken:m,fromAmount:d,toToken:v,toAmount:p,expiredAt:e}).then((e=>{const n=e.result;return t=n.order,e.send()})).then((n=>{const a={from_token:m,from_token_symbol:null==s?void 0:s.symbol,from_token_decimals:null==s?void 0:s.decimals,to_token:v,to_token_symbol:null==r?void 0:r.symbol,to_token_decimals:null==r?void 0:r.decimals,from_amount:Number(d)||0,to_amount:Number(p)||0,id:t,orderKey:t,chain:"solana",created_at:0,state:"Sending",from_amount_used:"0",percent:"0",expiredAt:e,from_token_logo_url:s.logo_url,to_token_logo_url:r.logo_url};return nt({chain:"solana",destination:"wallet rpc",type:20,order_id:"jupiter_"+t,status:1,wallet:y.address,out_token:v,out_amount:a.to_amount,in_token:m,in_amount:a.from_amount}),_e.value=[a,..._e.value],pe.value=!1,de.value=!1,n.wait()})).then((()=>{Mt(t),G.value="",q.value="",s.address===_.token1.address?_.getToken1Info():s.address===_.token2.address&&_.getToken2Info()})).catch((e=>{_e.value=_e.value.filter((e=>e.orderKey!==t)),we(e,"solana")})).finally((()=>{pe.value=!1,de.value=!1}))}}function Mt(e,t){if(y.chain){const n=y.chain;if("solana"===n)return void Ft(e,t);be.value=!0,function(e,t=1,n=1e3){const a=M(),l=e.chain||a.chain||"",o=e.maker||a.address||"";if(!l||!o)return Promise.resolve([]);const{$api:i}=V();return i("/v1api/v2/aveswap/limitorder",{method:"get",query:{pageNO:t,pageSize:n,...{maker:o,chain:l,...e}}}).then((e=>{var t;return Promise.resolve((null==(t=null==e?void 0:e.data)?void 0:t.data)||(null==e?void 0:e.data)||e||[])}))}({chain:n}).then((e=>{_e.value=e})).finally((()=>{setTimeout((()=>{be.value=!1}),800)}))}}let Pt=null,At=0;function Ft(e,t=1){if("solana"===y.chain)return be.value=!0,Promise.all([Ke({wallet:y.address}),We({wallet:y.address,take:100})]).then((async n=>{var a,l,o,i,s,r,u,c,m,d;const v=(null==(l=null==(a=null==n?void 0:n[0])?void 0:a.map)?void 0:l.call(a,(e=>[(null==e?void 0:e.inputMint)+"-solana",(null==e?void 0:e.outputMint)+"-solana"])))||[],p=(null==(i=null==(o=null==n?void 0:n[1])?void 0:o.map)?void 0:i.call(o,(e=>[(null==e?void 0:e.inputMint)+"-solana",(null==e?void 0:e.outputMint)+"-solana"])))||[],f=Array.from(new Set([...null==(s=null==v?void 0:v.flat)?void 0:s.call(v),...null==p?void 0:p.flat()])),k=await Ge(f).catch((async e=>({}))),_=[...null==(u=null==(r=null==n?void 0:n[0])?void 0:r.map)?void 0:u.call(r,(e=>{var t,n,a,l,o,i,s,r,u,c,m,d,v,p,f,_,b,g,h;const y=null==(t=k[e.inputMint+"-solana"])?void 0:t.decimal,x=null==(n=k[e.outputMint+"-solana"])?void 0:n.decimal;return{...e,from_token:e.inputMint,from_token_symbol:null==(a=k[e.inputMint+"-solana"])?void 0:a.symbol,from_token_decimals:null==(l=k[e.inputMint+"-solana"])?void 0:l.decimal,from_token_price:null==(o=k[e.inputMint+"-solana"])?void 0:o.current_price_usd,to_token:e.outputMint,to_token_symbol:null==(i=k[e.outputMint+"-solana"])?void 0:i.symbol,to_token_decimals:null==(s=k[e.outputMint+"-solana"])?void 0:s.decimal,to_token_price:null==(r=k[e.outputMint+"-solana"])?void 0:r.current_price_usd,from_amount:(null==(m=null==(c=null==(u=new Q(e.makingAmount||0))?void 0:u.times)?void 0:c.call(u,10**y))?void 0:m.toFixed(0))||0,to_amount:(null==(p=null==(v=null==(d=new Q(e.takingAmount||0))?void 0:d.times)?void 0:v.call(d,10**x))?void 0:p.toFixed(0))||0,chain:"solana",from_amount_used:null==(_=null==(f=new Q(e.makingAmount||0).minus(e.remainingMakingAmount))?void 0:f.times)?void 0:_.call(f,10**y).toFixed(0),to_amount_used:null==(b=new Q(e.takingAmount||0).minus(e.remainingTakingAmount))?void 0:b.times(10**x).toFixed(0),percent:new Q(e.makingAmount||0).minus(e.remainingMakingAmount).div(e.makingAmount).times(100).toFixed(),from_token_logo_url:null==(g=k[e.inputMint+"-solana"])?void 0:g.logo_url,to_token_logo_url:null==(h=k[e.outputMint+"-solana"])?void 0:h.logo_url,id:e.orderKey,state:"Pending"}})),...null==(m=null==(c=null==n?void 0:n[1])?void 0:c.map)?void 0:m.call(c,(e=>{var t,n,a,l,o,i,s,r,u,c,m,d,v,p,f,_,b,g,h;const y=null==(t=k[e.inputMint+"-solana"])?void 0:t.decimal,x=null==(n=k[e.outputMint+"-solana"])?void 0:n.decimal;return{...e,from_token:e.inputMint,from_token_symbol:null==(a=k[e.inputMint+"-solana"])?void 0:a.symbol,from_token_decimals:null==(l=k[e.inputMint+"-solana"])?void 0:l.decimal,from_token_price:null==(o=k[e.inputMint+"-solana"])?void 0:o.current_price_usd,to_token:e.outputMint,to_token_symbol:null==(i=k[e.outputMint+"-solana"])?void 0:i.symbol,to_token_decimals:null==(s=k[e.outputMint+"-solana"])?void 0:s.decimal,to_token_price:null==(r=k[e.outputMint+"-solana"])?void 0:r.current_price_usd,from_amount:(null==(m=null==(c=null==(u=new Q(e.makingAmount||0))?void 0:u.times)?void 0:c.call(u,10**y))?void 0:m.toFixed(0))||0,to_amount:(null==(p=null==(v=null==(d=new Q(e.takingAmount||0))?void 0:d.times)?void 0:v.call(d,10**x))?void 0:p.toFixed(0))||0,chain:"solana",from_amount_used:null==(_=null==(f=new Q(e.makingAmount||0).minus(e.remainingMakingAmount))?void 0:f.times)?void 0:_.call(f,10**y).toFixed(0),to_amount_used:null==(b=new Q(e.takingAmount||0).minus(e.remainingTakingAmount))?void 0:b.times(10**x).toFixed(0),percent:new Q(e.makingAmount||0).minus(e.remainingMakingAmount).div(e.makingAmount).times(100).toFixed(),from_token_logo_url:null==(g=k[e.inputMint+"-solana"])?void 0:g.logo_url,to_token_logo_url:null==(h=k[e.outputMint+"-solana"])?void 0:h.logo_url,id:e.orderKey,state:e.status}}))],b=null==_?void 0:_.some((t=>t.orderKey===e)),g=null==_?void 0:_.some((t=>t.orderKey===e&&"Cancelled"===t.state));return e&&At<=30&&(0!==t&&!b||0===t&&!g)?(Pt&&(clearTimeout(Pt),Pt=null),new Promise((n=>{Pt=setTimeout((()=>{var a;At+=5,null==(a=null==Ft?void 0:Ft(e,t))||a.then((e=>{n(e)}))}),5e3)}))):(be.value=!1,_e.value=null==(d=null==_?void 0:_.filter)?void 0:d.call(_,(n=>!(n.orderKey===e&&"Pending"===n.state&&0===t))),At=0,_)})).catch((e=>{At=0,be.value=!1}))}function Ct(e,t){var n;"solana"===e.chain?null==(n=null==Ft?void 0:Ft(e.publicKey,0))||n.then((()=>{t&&(t[e.publicKey]=!1)})):Mt()}return Ie((()=>_.fromToken.address),(()=>{_.fromToken.address&&(G.value="",q.value="",st())})),Ie((()=>y.address),(()=>{y.address&&(st(),Mt())})),Me((()=>{var e,t,n,a,l,o;st(),Mt(),"solana"!==$.value?(ne.value=(null==(t=null==(e=_.baseToken)?void 0:e.token)?void 0:t.current_price_usd)?Pe(_.baseToken.token.current_price_usd):"",le.value=(null==(a=null==(n=_.baseToken)?void 0:n.token)?void 0:a.current_price_usd)?Pe(_.baseToken.token.current_price_usd):""):te.value=(null==(o=null==(l=_.baseToken)?void 0:l.token)?void 0:o.current_price_usd)?g(_.baseToken.token.current_price_usd):"",rt()})),(e,t)=>{var n,a;const h=Fe,M=T,P=x,A=m;return o(),l(v,null,[i("form",{class:"swap-container",action:"",onSubmit:r(Nt,["prevent","stop"])},[i("div",aa,[i("div",la,[s(Je,{token:u(_).token1,"onUpdate:token":[t[0]||(t[0]=e=>u(_).token1=e),ot],tokens:u(_).swapTokens,chain:u(_).chain},null,8,["token","tokens","chain"]),t[21]||(t[21]=i("span",{style:{flex:"1"}},null,-1)),i("div",{class:"s-text",innerHTML:`${e.$t("balance1")}: ${("formatNumber"in e?e.formatNumber:u(g))((null==(n=u(_).token1)?void 0:n.balance)||0)}`},null,8,oa),1===u(_).activeTab?(o(),l("button",{key:0,class:"max-btn",type:"button",onClick:t[1]||(t[1]=r((e=>ft(100)),["stop"]))},c(e.$t("max")),1)):b("",!0)]),i("div",ia,[s(h,{modelValue:u(G),"onUpdate:modelValue":[t[2]||(t[2]=e=>k(G)?G.value=e:null),t[3]||(t[3]=e=>{var t;G.value=null==(t=null==e?void 0:e.replace)?void 0:t.call(e,/\-|[^\d.]/g,""),_t()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",onFocus:t[4]||(t[4]=e=>{var t;return null==(t=u(S))?void 0:t.handleClick(0,!0)})},null,8,["modelValue"])])]),i("div",sa,[i("div",ra,[s(Je,{token:u(_).token2,"onUpdate:token":[t[5]||(t[5]=e=>u(_).token2=e),it],tokens:u(_).swapTokens,chain:u(_).chain},null,8,["token","tokens","chain"]),t[22]||(t[22]=i("span",{style:{flex:"1"}},null,-1)),i("div",{class:"s-text",innerHTML:`${e.$t("balance1")}: ${("formatNumber"in e?e.formatNumber:u(g))((null==(a=u(_).token2)?void 0:a.balance)||0)}`},null,8,ua),0===u(_).activeTab?(o(),l("button",{key:0,class:"max-btn",type:"button",onClick:t[6]||(t[6]=r((e=>ft(100)),["stop"]))},c(e.$t("max")),1)):b("",!0)]),i("div",ca,[s(h,{modelValue:u(q),"onUpdate:modelValue":[t[7]||(t[7]=e=>k(q)?q.value=e:null),t[8]||(t[8]=e=>{var t;q.value=null==(t=null==e?void 0:e.replace)?void 0:t.call(e,/\-|[^\d.]/g,""),gt()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",onFocus:t[9]||(t[9]=e=>{var t;return null==(t=u(S))?void 0:t.handleClick(0,!0)})},null,8,["modelValue"])])]),s(Qe,{ref:"percentStepInf",activeColor:0===u(_).activeTab?("upColor"in e?e.upColor:u($e))[0]:("downColor"in e?e.downColor:u(Ne))[0],onChange:ft},null,8,["activeColor"]),1===u(_).swapType?(o(),l("div",ma,c(e.$t("triggerPrice"))+"("+c(u(_).token1.symbol||"")+")",1)):b("",!0),1===u(_).swapType?(o(),l("div",da,[i("button",{class:"limit-price-icon",type:"button",disabled:!u(le),onClick:r(mt,["stop"])},[s(M,null,{default:d((()=>[s(u(Ce))])),_:1})],8,va),t[23]||(t[23]=i("span",{class:"text-14px color-[--d-666-l-999]"},"$",-1)),s(h,{modelValue:u(le),"onUpdate:modelValue":[t[10]||(t[10]=e=>k(le)?le.value=e:null),t[11]||(t[11]=e=>{var t;le.value=null==(t=null==e?void 0:e.replace)?void 0:t.call(e,/\-|[^\d.]/g,"")})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:center"},null,8,["modelValue"]),i("button",{class:"limit-price-icon",type:"button",disabled:!u(le),onClick:r(dt,["stop"])},[s(M,null,{default:d((()=>[s(u(Le))])),_:1})],8,pa)])):b("",!0),"solana"===u(_).chain&&0===u(_).swapType?(o(),l(v,{key:2},[i("div",fa,c(e.$t("delegatePrice"))+"("+c(u(_).token1.symbol||"")+")",1),i("div",ka,[i("button",{class:"limit-price-icon",type:"button",disabled:!u(te),onClick:r(vt,["stop"])},[s(M,null,{default:d((()=>[s(u(Ce))])),_:1})],8,_a),t[24]||(t[24]=i("span",{class:"text-14px color-[--d-666-l-999]"},"$",-1)),s(h,{modelValue:u(te),"onUpdate:modelValue":[t[12]||(t[12]=e=>k(te)?te.value=e:null),t[13]||(t[13]=e=>{var t;te.value=null==(t=null==e?void 0:e.replace)?void 0:t.call(e,/\-|[^\d.]/g,""),xt()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:center"},null,8,["modelValue"]),i("button",{class:"limit-price-icon",type:"button",disabled:!u(te),onClick:r(pt,["stop"])},[s(M,null,{default:d((()=>[s(u(Le))])),_:1})],8,ba)])],64)):(o(),l(v,{key:3},[i("div",ga,c(e.$t("delegatePrice"))+"("+c(u(_).token1.symbol||"")+")",1),i("div",ha,[i("button",{class:"limit-price-icon",type:"button",disabled:!u(ne),onClick:r(ut,["stop"])},[s(M,null,{default:d((()=>[s(u(Ce))])),_:1})],8,ya),t[25]||(t[25]=i("span",{class:"text-14px color-[--d-666-l-999]"},"$",-1)),s(h,{modelValue:u(ne),"onUpdate:modelValue":[t[14]||(t[14]=e=>k(ne)?ne.value=e:null),t[15]||(t[15]=e=>{var t;ne.value=null==(t=null==e?void 0:e.replace)?void 0:t.call(e,/\-|[^\d.]/g,""),ht()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:center"},null,8,["modelValue"]),i("button",{class:"limit-price-icon",type:"button",disabled:!u(ne),onClick:r(ct,["stop"])},[s(M,null,{default:d((()=>[s(u(Le))])),_:1})],8,xa)])],64)),u(y).address?u(y).address&&!u(y).provider?(o(),f(P,{key:5,"native-type":"button",class:"submit-btn",disabled:"",color:"#555555"},{default:d((()=>[w(c(e.$t("watchWalletNotSwap")),1)])),_:1})):wt()?!u(tt)||u(J)?(o(),f(P,{key:7,class:"submit-btn",block:"",color:u(at),"native-type":"submit","loading-text":u(J)?e.$t("checkingAllowance"):u(oe)?e.$t("quoting"):u(ce)?e.$t("approve"):"",disabled:!St(),loading:u(ce)||u(ie)||u(J)},{default:d((()=>[w(c($t()||e.$t("approve")),1)])),_:1},8,["color","loading-text","disabled","loading"])):(o(),f(P,{key:8,class:"submit-btn",block:"",loading:u(ie)||u(ee),"loading-text":u(ee)?e.$t("quoting"):u(ie)?0===u(_).activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:u(at),disabled:!St()||!u(G)||!u(q)||u(J),"native-type":"submit"},{default:d((()=>{var t;return[w(c($t()||(0===u(_).activeTab?e.$t("buy"):e.$t("sell"))+" "+((null==(t=u(_).token1)?void 0:t.symbol)||"")),1)]})),_:1},8,["loading","loading-text","color","disabled"])):(o(),f(P,{key:6,"native-type":"button",class:"submit-btn",disabled:"",block:"",color:"#555555"},{default:d((()=>[w(c(Tt()),1)])),_:1})):(o(),f(P,{key:4,"native-type":"button",class:"submit-btn",color:"#286DFF",onClick:t[16]||(t[16]=r((t=>("useBotStore"in e?e.useBotStore:u(He))().changeConnectVisible(!0,1)),["stop"]))},{default:d((()=>[w(c(e.$t("pConnectWallet")),1)])),_:1})),i("ul",wa,["solana"!==u($)?(o(),l("li",Ta,[i("span",null,c(e.$t("slippage")),1),s(A,{name:"material-symbols:help-outline",onClick:t[17]||(t[17]=r((t=>{return n=e.$t("slippage"),a=e.$t("minimumReceivedTips"),void ye.alert(a,n,{confirmButtonText:N("getIt")}).then((()=>{}));var n,a}),["stop"]))}),t[26]||(t[26]=i("span",{style:{flex:"1"}},null,-1)),s(Ye,{slippage:u(I),"onUpdate:slippage":t[18]||(t[18]=e=>k(I)?I.value=e:null),canSetAuto:!1},null,8,["slippage"])])):b("",!0),0===u(_).swapType||1===u(_).swapType?(o(),l("li",Sa,[i("div",$a,[i("span",null,c(e.$t("limitExpiredTime")),1)]),0===u(_).swapType&&"solana"===u($)?(o(),f(lt,{key:0,expiredTime:u(me),"onUpdate:expiredTime":t[19]||(t[19]=e=>k(me)?me.value=e:null)},null,8,["expiredTime"])):(o(),l("div",Na,c(u(Ee))+" "+c(e.$t("days1")),1))])):b("",!0)])],32),Ae(i("div",Ia,[i("div",Ma,[(o(!0),l(v,null,p(u(Ze),((e,t)=>(o(),l("button",{key:t,class:Ue(["tab-item",{active:e.value===u(he)}]),type:"button",onClick:r((t=>he.value=e.value),["stop"])},c(e.name),11,Pa)))),128))]),Ae(s(na,{class:"mt-5px",tableList:u(Xe),onRefresh:Ct},null,8,["tableList"]),[[Re,"limit"===u(he)]])],512),[[Re,2!==u(_).swapType]]),s(on,{visible:u(de),"onUpdate:visible":t[20]||(t[20]=e=>k(de)?de.value=e:null),limitInfo:u(et),loading:u(pe),chain:u(y).chain,limitGasU:u(ae),activeShow:u(ke),onSubmit:It},null,8,["visible","limitInfo","loading","chain","limitGasU","activeShow"])],64)}}}),[["__scopeId","data-v-edf51c8b"]]);export{Aa as default};
