import{c2 as e,dQ as a,cb as l,en as t,I as o,g as n,c8 as r,r as s,n as i,m as u,dX as c,ey as d,l as v,fR as h,c6 as f,f as p,c as b,o as m,a as g,i as y,a4 as _,G as k,dK as w,f6 as C,dO as V,fS as x,eP as S,F as E,D as B,cq as A,eu as L,j as M,dW as $,p as H,de as K,K as F,B as P,b as W,bQ as R,N as O,ce as D,dN as q,dP as T,ez as j,eA as z,eE as I,dT as U,dU as X,eo as Y,dV as N,eq as Q,fT as G,fU as J,cs as Z,w as ee,at as ae,U as le,bx as te,eC as oe,bg as ne,eg as re,bZ as se,H as ie,d as ue,t as ce,eJ as de,a6 as ve,dY as he}from"./CcL3nfnm.js";const fe=e({color:{type:a(Object),required:!0},vertical:Boolean,disabled:Boolean});let pe=!1;function be(e,a){if(!l)return;const t=function(e){var l;null==(l=a.drag)||l.call(a,e)},o=function(e){var l;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",o),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",o),document.onselectstart=null,document.ondragstart=null,pe=!1,null==(l=a.end)||l.call(a,e)},n=function(e){var l;pe||(e.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",o),document.addEventListener("touchmove",t),document.addEventListener("touchend",o),pe=!0,null==(l=a.start)||l.call(a,e))};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!1})}const me=(e,{bar:a,thumb:l,handleDrag:t})=>{const o=v(),d=r("color-alpha-slider"),h=s(0),f=s(0),p=s();function b(){h.value=function(){if(!l.value)return 0;if(e.vertical)return 0;const a=o.vnode.el,t=e.color.get("alpha");return a?Math.round(t*(a.offsetWidth-l.value.offsetWidth/2)/100):0}(),f.value=function(){if(!l.value)return 0;const a=o.vnode.el;if(!e.vertical)return 0;const t=e.color.get("alpha");return a?Math.round(t*(a.offsetHeight-l.value.offsetHeight/2)/100):0}(),p.value=function(){if(e.color&&e.color.value){const{r:a,g:l,b:t}=e.color.toRgb();return`linear-gradient(to right, rgba(${a}, ${l}, ${t}, 0) 0%, rgba(${a}, ${l}, ${t}, 1) 100%)`}return""}()}i((()=>{if(!a.value||!l.value)return;const e={drag:e=>{t(e)},end:e=>{t(e)}};be(a.value,e),be(l.value,e),b()})),u((()=>e.color.get("alpha")),(()=>b())),u((()=>e.color.value),(()=>b()));const m=n((()=>[d.b(),d.is("vertical",e.vertical),d.is("disabled",e.disabled)])),g=n((()=>d.e("bar"))),y=n((()=>d.e("thumb")));return{rootKls:m,barKls:g,barStyle:n((()=>({background:p.value}))),thumbKls:y,thumbStyle:n((()=>({left:c(h.value),top:c(f.value)}))),update:b}},ge=p({name:"ElColorAlphaSlider"});var ye=f(p({...ge,props:fe,setup(e,{expose:a}){const l=e,{alpha:r,alphaLabel:s,bar:i,thumb:u,handleDrag:c,handleClick:f,handleKeydown:p}=(e=>{const a=v(),{t:l}=t(),r=o(),s=o(),i=n((()=>e.color.get("alpha"))),u=n((()=>l("el.colorpicker.alphaLabel")));function c(l){if(!s.value||!r.value||e.disabled)return;const t=a.vnode.el.getBoundingClientRect(),{clientX:o,clientY:n}=h(l);if(e.vertical){let a=n-t.top;a=Math.max(r.value.offsetHeight/2,a),a=Math.min(a,t.height-r.value.offsetHeight/2),e.color.set("alpha",Math.round((a-r.value.offsetHeight/2)/(t.height-r.value.offsetHeight)*100))}else{let a=o-t.left;a=Math.max(r.value.offsetWidth/2,a),a=Math.min(a,t.width-r.value.offsetWidth/2),e.color.set("alpha",Math.round((a-r.value.offsetWidth/2)/(t.width-r.value.offsetWidth)*100))}}function f(a){let l=i.value+a;l=l<0?0:l>100?100:l,e.color.set("alpha",l)}return{thumb:r,bar:s,alpha:i,alphaLabel:u,handleDrag:c,handleClick:function(a){var l;e.disabled||(a.target!==r.value&&c(a),null==(l=r.value)||l.focus())},handleKeydown:function(a){if(e.disabled)return;const{code:l,shiftKey:t}=a,o=t?10:1;switch(l){case d.left:case d.down:a.preventDefault(),a.stopPropagation(),f(-o);break;case d.right:case d.up:a.preventDefault(),a.stopPropagation(),f(o)}}}})(l),{rootKls:w,barKls:C,barStyle:V,thumbKls:x,thumbStyle:S,update:E}=me(l,{bar:i,thumb:u,handleDrag:c});return a({update:E,bar:i,thumb:u}),(e,a)=>(m(),b("div",{class:k(y(w))},[g("div",{ref_key:"bar",ref:i,class:k(y(C)),style:_(y(V)),onClick:y(f)},null,14,["onClick"]),g("div",{ref_key:"thumb",ref:u,class:k(y(x)),style:_(y(S)),"aria-label":y(s),"aria-valuenow":y(r),"aria-orientation":e.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:y(p)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}}),[["__file","alpha-slider.vue"]]);var _e=f(p({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean,disabled:Boolean},setup(e){const a=r("color-hue-slider"),l=v(),t=s(),o=s(),c=s(0),d=s(0),f=n((()=>e.color.get("hue")));function p(a){if(!o.value||!t.value||e.disabled)return;const n=l.vnode.el.getBoundingClientRect(),{clientX:r,clientY:s}=h(a);let i;if(e.vertical){let e=s-n.top;e=Math.min(e,n.height-t.value.offsetHeight/2),e=Math.max(t.value.offsetHeight/2,e),i=Math.round((e-t.value.offsetHeight/2)/(n.height-t.value.offsetHeight)*360)}else{let e=r-n.left;e=Math.min(e,n.width-t.value.offsetWidth/2),e=Math.max(t.value.offsetWidth/2,e),i=Math.round((e-t.value.offsetWidth/2)/(n.width-t.value.offsetWidth)*360)}e.color.set("hue",i)}function b(){c.value=function(){if(!t.value)return 0;const a=l.vnode.el;if(e.vertical)return 0;const o=e.color.get("hue");return a?Math.round(o*(a.offsetWidth-t.value.offsetWidth/2)/360):0}(),d.value=function(){if(!t.value)return 0;const a=l.vnode.el;if(!e.vertical)return 0;const o=e.color.get("hue");return a?Math.round(o*(a.offsetHeight-t.value.offsetHeight/2)/360):0}()}return u((()=>f.value),(()=>{b()})),i((()=>{if(!o.value||!t.value||e.disabled)return;const a={drag:e=>{p(e)},end:e=>{p(e)}};be(o.value,a),be(t.value,a),b()})),{bar:o,thumb:t,thumbLeft:c,thumbTop:d,hueValue:f,handleClick:function(a){if(e.disabled)return;a.target!==t.value&&p(a)},update:b,ns:a}}}),[["render",function(e,a,l,t,o,n){return m(),b("div",{class:k([e.ns.b(),e.ns.is("vertical",e.vertical)])},[g("div",{ref:"bar",class:k(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),g("div",{ref:"thumb",class:k(e.ns.e("thumb")),style:_({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}],["__file","hue-slider.vue"]]);const ke=e({modelValue:{type:a(String),default:void 0},border:{type:Boolean,default:!0},showAlpha:Boolean,colorFormat:String,disabled:Boolean,predefine:{type:a(Array)}}),we={[V]:e=>w(e)||C(e)},Ce=Symbol("colorCommonPickerKey"),Ve=Symbol("colorPickerPanelContextKey");class xe{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new x,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const a in e)S(e,a)&&(this[a]=e[a]);e.value?this.fromString(e.value):this.doOnChange()}set(e,a){if(1!==arguments.length||"object"!=typeof e)this[`_${e}`]=a,this._isValid=!0,this.doOnChange();else for(const l in e)S(e,l)&&this.set(l,e[l])}get(e){return["hue","saturation","value","alpha"].includes(e)?Math.round(this[`_${e}`]):this[`_${e}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(e){const a=new x(e);if(this._isValid=a.isValid,a.isValid){const{h:e,s:l,v:t,a:o}=a.toHsv();this._hue=e,this._saturation=100*l,this._value=100*t,this._alpha=100*o}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}compare(e){const a=new x({h:e._hue,s:e._saturation/100,v:e._value/100,a:e._alpha/100});return this._tiny.equals(a)}doOnChange(){const{_hue:e,_saturation:a,_value:l,_alpha:t,format:o,enableAlpha:n}=this;let r=o||(n?"rgb":"hex");"hex"===o&&n&&(r="hex8"),this._tiny=new x({h:e,s:a/100,v:l/100,a:t/100}),this.value=this._isValid?this._tiny.toString(r):""}}var Se=f(p({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0},disabled:Boolean},setup(e){const a=r("color-predefine"),{currentColor:l}=A(Ve),t=s(o(e.colors,e.color));function o(e,a){return e.map((e=>{const l=new xe({value:e});return l.selected=l.compare(a),l}))}return u((()=>l.value),(e=>{const a=new xe({value:e});t.value.forEach((e=>{e.selected=a.compare(e)}))})),L((()=>{t.value=o(e.colors,e.color)})),{rgbaColors:t,handleSelect:function(a){e.disabled||e.color.fromString(e.colors[a])},ns:a}}}),[["render",function(e,a,l,t,o,n){return m(),b("div",{class:k(e.ns.b())},[g("div",{class:k(e.ns.e("colors"))},[(m(!0),b(E,null,B(e.rgbaColors,((a,l)=>(m(),b("div",{key:e.colors[l],class:k([e.ns.e("color-selector"),e.ns.is("alpha",a.get("alpha")<100),{selected:a.selected}]),onClick:a=>e.handleSelect(l)},[g("div",{style:_({backgroundColor:a.value})},null,4)],10,["onClick"])))),128))],2)],2)}],["__file","predefine.vue"]]);var Ee=f(p({name:"ElSlPanel",props:{color:{type:Object,required:!0},disabled:Boolean},setup(e){const a=r("color-svpanel"),l=v(),t=s(0),o=s(0),c=s("hsl(0, 100%, 50%)"),d=n((()=>({hue:e.color.get("hue"),value:e.color.get("value")})));function f(){const a=e.color.get("saturation"),n=e.color.get("value"),r=l.vnode.el,{clientWidth:s,clientHeight:i}=r;o.value=a*s/100,t.value=(100-n)*i/100,c.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function p(a){if(e.disabled)return;const n=l.vnode.el.getBoundingClientRect(),{clientX:r,clientY:s}=h(a);let i=r-n.left,u=s-n.top;i=Math.max(0,i),i=Math.min(i,n.width),u=Math.max(0,u),u=Math.min(u,n.height),o.value=i,t.value=u,e.color.set({saturation:i/n.width*100,value:100-u/n.height*100})}return u((()=>d.value),(()=>{f()})),i((()=>{be(l.vnode.el,{drag:e=>{p(e)},end:e=>{p(e)}}),f()})),{cursorTop:t,cursorLeft:o,background:c,colorValue:d,handleDrag:p,update:f,ns:a}}}),[["render",function(e,a,l,t,o,n){return m(),b("div",{class:k(e.ns.b()),style:_({backgroundColor:e.background})},[g("div",{class:k(e.ns.e("white"))},null,2),g("div",{class:k(e.ns.e("black"))},null,2),g("div",{class:k(e.ns.e("cursor")),style:_({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[g("div")],6)],6)}],["__file","sv-panel.vue"]]);const Be=(e,a)=>{const l=M(new xe({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue}));return u((()=>[e.colorFormat,e.showAlpha]),(()=>{l.enableAlpha=e.showAlpha,l.format=e.colorFormat||l.format,l.doOnChange(),a(V,l.value)})),{color:l}},Ae=p({name:"ElColorPickerPanel"});const Le=D(f(p({...Ae,props:ke,emits:we,setup(e,{expose:a,emit:l}){const t=e,o=r("color-picker-panel"),c=$(),d=s(),v=s(),h=s(),f=s(),p=s(""),{color:_}=A(Ce,(()=>Be(t,l)),!0);function w(){_.fromString(p.value),_.value!==p.value&&(p.value=_.value)}return i((()=>{t.modelValue&&(p.value=_.value),H((()=>{var e,a,l;null==(e=d.value)||e.update(),null==(a=v.value)||a.update(),null==(l=h.value)||l.update()}))})),u((()=>t.modelValue),(e=>{e&&e!==_.value&&_.fromString(e)})),u((()=>_.value),(e=>{l(V,e),p.value=e})),K(Ve,{currentColor:n((()=>_.value))}),a({color:_,inputRef:f}),(e,a)=>(m(),b("div",{class:k([y(o).b(),y(o).is("disabled",y(c)),y(o).is("border",e.border)])},[g("div",{class:k(y(o).e("wrapper"))},[W(_e,{ref_key:"hue",ref:d,class:"hue-slider",color:y(_),vertical:"",disabled:y(c)},null,8,["color","disabled"]),W(Ee,{ref_key:"sv",ref:v,color:y(_),disabled:y(c)},null,8,["color","disabled"])],2),e.showAlpha?(m(),F(ye,{key:0,ref_key:"alpha",ref:h,color:y(_),disabled:y(c)},null,8,["color","disabled"])):P("v-if",!0),e.predefine?(m(),F(Se,{key:1,ref:"predefine","enable-alpha":e.showAlpha,color:y(_),colors:e.predefine,disabled:y(c)},null,8,["enable-alpha","color","colors","disabled"])):P("v-if",!0),g("div",{class:k(y(o).e("footer"))},[W(y(O),{ref_key:"inputRef",ref:f,modelValue:p.value,"onUpdate:modelValue":e=>p.value=e,"validate-event":!1,size:"small",disabled:y(c),onChange:w},null,8,["modelValue","onUpdate:modelValue","disabled"]),R(e.$slots,"footer")],2)],2))}}),[["__file","color-picker-panel.vue"]])),Me=e({persistent:{type:Boolean,default:!0},modelValue:{type:a(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:I,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:z.teleported,appendTo:z.appendTo,predefine:{type:a(Array)},validateEvent:{type:Boolean,default:!0},...j,...T(["ariaLabel"])}),$e={[V]:e=>w(e)||C(e),[q]:e=>w(e)||C(e),activeChange:e=>w(e)||C(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},He=p({name:"ElColorPicker"});const Ke=D(f(p({...He,props:Me,emits:$e,setup(e,{expose:a,emit:l}){const o=e,{t:i}=t(),c=r("color"),{formItem:v}=U(),h=X(),f=$(),{valueOnClear:p,isEmptyValue:b}=Y(o,null),w=Be(o,l),{inputId:C,isLabeledByFormItem:x}=N(o,{formItemContext:v}),S=s(),E=s(),B=s(),A=s(!1),L=s(!1);let M=!0;const{isFocused:P,handleFocus:R,handleBlur:O}=Q(E,{disabled:f,beforeBlur(e){var a;return null==(a=S.value)?void 0:a.isFocusInsideContent(e)},afterBlur(){be(!1),_e()}}),D=G((()=>{var e,a;return null!=(a=null==(e=B.value)?void 0:e.color)?a:w.color})),T=n((()=>J(o,Object.keys(ke)))),j=n((()=>o.modelValue||L.value?function(e,a){const{r:l,g:t,b:o,a:n}=e.toRgb();return a?`rgba(${l}, ${t}, ${o}, ${n})`:`rgb(${l}, ${t}, ${o})`}(D,o.showAlpha):"transparent")),z=n((()=>o.modelValue||L.value?D.value:"")),I=n((()=>x.value?void 0:o.ariaLabel||i("el.colorpicker.defaultLabel"))),fe=n((()=>x.value?null==v?void 0:v.labelId:void 0)),pe=n((()=>[c.b("picker"),c.is("disabled",f.value),c.bm("picker",h.value),c.is("focused",P.value)]));function be(e){A.value=e}const me=Z(be,100,{leading:!0});function ge(){f.value||be(!0)}function ye(){me(!1),_e()}function _e(){H((()=>{o.modelValue?D.fromString(o.modelValue):(D.value="",H((()=>{L.value=!1})))}))}function we(){f.value||(A.value&&_e(),me(!A.value))}function Ve(){const e=b(D.value)?p.value:D.value;l(V,e),l(q,e),o.validateEvent&&(null==v||v.validate("change").catch((e=>he()))),me(!1),H((()=>{const e=new xe({enableAlpha:o.showAlpha,format:o.colorFormat||"",value:o.modelValue});D.compare(e)||_e()}))}function Se(){me(!1),l(V,p.value),l(q,p.value),o.modelValue!==p.value&&o.validateEvent&&(null==v||v.validate("change").catch((e=>he()))),_e()}function Ee(){A.value&&(ye(),P.value&&$e())}function Ae(e){e.preventDefault(),e.stopPropagation(),be(!1),_e()}function Me(e){var a,l;switch(e.code){case d.enter:case d.numpadEnter:case d.space:e.preventDefault(),e.stopPropagation(),ge(),null==(l=null==(a=null==B?void 0:B.value)?void 0:a.inputRef)||l.focus();break;case d.esc:Ae(e)}}function $e(){E.value.focus()}return u((()=>z.value),(e=>{M&&l("activeChange",e),M=!0})),u((()=>D.value),(()=>{o.modelValue||L.value||(L.value=!0)})),u((()=>o.modelValue),(e=>{e?e&&e!==D.value&&(M=!1,D.fromString(e)):L.value=!1})),K(Ce,w),a({color:D,show:ge,hide:ye,focus:$e,blur:function(){E.value.blur()}}),(e,a)=>(m(),F(y(ve),{ref_key:"popper",ref:S,visible:A.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[y(c).be("picker","panel"),e.popperClass],"stop-popper-mouse-event":!1,pure:"",effect:"light",trigger:"click",teleported:e.teleported,transition:`${y(c).namespace.value}-zoom-in-top`,persistent:e.persistent,"append-to":e.appendTo,onHide:e=>be(!1)},{content:ee((()=>[le((m(),F(y(Le),ae({ref_key:"pickerPanelRef",ref:B},y(T),{border:!1,onKeydown:se(Ae,["esc"])}),{footer:ee((()=>[g("div",null,[W(y(ie),{class:k(y(c).be("footer","link-btn")),text:"",size:"small",onClick:Se},{default:ee((()=>[ue(ce(y(i)("el.colorpicker.clear")),1)])),_:1},8,["class"]),W(y(ie),{plain:"",size:"small",class:k(y(c).be("footer","btn")),onClick:Ve},{default:ee((()=>[ue(ce(y(i)("el.colorpicker.confirm")),1)])),_:1},8,["class"])])])),_:1},16,["onKeydown"])),[[y(de),Ee,E.value]])])),default:ee((()=>[g("div",ae({id:y(C),ref_key:"triggerRef",ref:E},e.$attrs,{class:y(pe),role:"button","aria-label":y(I),"aria-labelledby":y(fe),"aria-description":y(i)("el.colorpicker.description",{color:e.modelValue||""}),"aria-disabled":y(f),tabindex:y(f)?void 0:e.tabindex,onKeydown:Me,onFocus:y(R),onBlur:y(O)}),[g("div",{class:k(y(c).be("picker","trigger")),onClick:we},[g("span",{class:k([y(c).be("picker","color"),y(c).is("alpha",e.showAlpha)])},[g("span",{class:k(y(c).be("picker","color-inner")),style:_({backgroundColor:y(j)})},[le(W(y(te),{class:k([y(c).be("picker","icon"),y(c).is("icon-arrow-down")])},{default:ee((()=>[W(y(oe))])),_:1},8,["class"]),[[ne,e.modelValue||L.value]]),le(W(y(te),{class:k([y(c).be("picker","empty"),y(c).is("icon-close")])},{default:ee((()=>[W(y(re))])),_:1},8,["class"]),[[ne,!e.modelValue&&!L.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])])),_:1},8,["visible","popper-class","teleported","transition","persistent","append-to","onHide"]))}}),[["__file","color-picker.vue"]]));export{Ke as E};
